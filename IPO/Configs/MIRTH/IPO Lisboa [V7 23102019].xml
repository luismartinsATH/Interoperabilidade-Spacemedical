<channelGroup version="3.8.0">
  <id>92829f87-469e-4433-9809-6d60e0c965ca</id>
  <name>IPO Lisboa</name>
  <revision>5</revision>
  <lastModified>
    <time>1571831651882</time>
    <timezone>Europe/London</timezone>
  </lastModified>
  <description>Canais para integração Sentinel</description>
  <channels>
    <channel version="3.8.0">
      <id>405c2304-fccb-4aff-9800-f1c211eb8ff0</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>IPOLX - MIRTH to SENTINEL</name>
      <description></description>
      <revision>2</revision>
      <sourceConnector version="3.8.0">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.tcp.TcpReceiverProperties" version="3.8.0">
          <pluginProperties/>
          <listenerConnectorProperties version="3.8.0">
            <host>0.0.0.0</host>
            <port>22000</port>
          </listenerConnectorProperties>
          <sourceConnectorProperties version="3.8.0">
            <responseVariable>Auto-generate (After source transformer)</responseVariable>
            <respondAfterProcessing>true</respondAfterProcessing>
            <processBatch>false</processBatch>
            <firstResponse>true</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <transmissionModeProperties class="com.mirth.connect.plugins.mllpmode.MLLPModeProperties">
            <pluginPointName>MLLP</pluginPointName>
            <startOfMessageBytes>0B</startOfMessageBytes>
            <endOfMessageBytes>1C0D</endOfMessageBytes>
            <useMLLPv2>false</useMLLPv2>
            <ackBytes>06</ackBytes>
            <nackBytes>15</nackBytes>
            <maxRetries>2</maxRetries>
          </transmissionModeProperties>
          <serverMode>true</serverMode>
          <remoteAddress></remoteAddress>
          <remotePort></remotePort>
          <overrideLocalBinding>false</overrideLocalBinding>
          <reconnectInterval>5000</reconnectInterval>
          <receiveTimeout>0</receiveTimeout>
          <bufferSize>65536</bufferSize>
          <maxConnections>10</maxConnections>
          <keepConnectionOpen>true</keepConnectionOpen>
          <dataTypeBinary>false</dataTypeBinary>
          <charsetEncoding>DEFAULT_ENCODING</charsetEncoding>
          <respondOnNewConnection>0</respondOnNewConnection>
          <responseAddress></responseAddress>
          <responsePort></responsePort>
        </properties>
        <transformer version="3.8.0">
          <elements/>
          <inboundDataType>HL7V2</inboundDataType>
          <outboundDataType>HL7V2</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
              <handleRepetitions>true</handleRepetitions>
              <handleSubcomponents>true</handleSubcomponents>
              <useStrictParser>false</useStrictParser>
              <useStrictValidation>false</useStrictValidation>
              <stripNamespaces>true</stripNamespaces>
              <segmentDelimiter>\r</segmentDelimiter>
              <convertLineBreaks>true</convertLineBreaks>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
              <useStrictParser>false</useStrictParser>
              <useStrictValidation>false</useStrictValidation>
              <segmentDelimiter>\r</segmentDelimiter>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
              <splitType>MSH_Segment</splitType>
              <batchScript></batchScript>
            </batchProperties>
            <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
              <segmentDelimiter>\r</segmentDelimiter>
              <successfulACKCode>AA</successfulACKCode>
              <successfulACKMessage></successfulACKMessage>
              <errorACKCode>AE</errorACKCode>
              <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
              <rejectedACKCode>AR</rejectedACKCode>
              <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
              <msh15ACKAccept>false</msh15ACKAccept>
              <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
            </responseGenerationProperties>
            <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
              <successfulACKCode>AA,CA</successfulACKCode>
              <errorACKCode>AE,CE</errorACKCode>
              <rejectedACKCode>AR,CR</rejectedACKCode>
              <validateMessageControlId>true</validateMessageControlId>
              <originalMessageControlId>Destination_Encoded</originalMessageControlId>
              <originalIdMapVariable></originalIdMapVariable>
            </responseValidationProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
              <handleRepetitions>true</handleRepetitions>
              <handleSubcomponents>true</handleSubcomponents>
              <useStrictParser>false</useStrictParser>
              <useStrictValidation>false</useStrictValidation>
              <stripNamespaces>true</stripNamespaces>
              <segmentDelimiter>\r</segmentDelimiter>
              <convertLineBreaks>true</convertLineBreaks>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
              <useStrictParser>false</useStrictParser>
              <useStrictValidation>false</useStrictValidation>
              <segmentDelimiter>\r</segmentDelimiter>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
              <splitType>MSH_Segment</splitType>
              <batchScript></batchScript>
            </batchProperties>
            <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
              <segmentDelimiter>\r</segmentDelimiter>
              <successfulACKCode>AA</successfulACKCode>
              <successfulACKMessage></successfulACKMessage>
              <errorACKCode>AE</errorACKCode>
              <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
              <rejectedACKCode>AR</rejectedACKCode>
              <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
              <msh15ACKAccept>false</msh15ACKAccept>
              <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
            </responseGenerationProperties>
            <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
              <successfulACKCode>AA,CA</successfulACKCode>
              <errorACKCode>AE,CE</errorACKCode>
              <rejectedACKCode>AR,CR</rejectedACKCode>
              <validateMessageControlId>true</validateMessageControlId>
              <originalMessageControlId>Destination_Encoded</originalMessageControlId>
              <originalIdMapVariable></originalIdMapVariable>
            </responseValidationProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.8.0">
          <elements/>
        </filter>
        <transportName>TCP Listener</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.8.0">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.tcp.TcpDispatcherProperties" version="3.8.0">
            <pluginProperties/>
            <destinationConnectorProperties version="3.8.0">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>true</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <transmissionModeProperties class="com.mirth.connect.plugins.mllpmode.MLLPModeProperties">
              <pluginPointName>MLLP</pluginPointName>
              <startOfMessageBytes>0B</startOfMessageBytes>
              <endOfMessageBytes>1C0D</endOfMessageBytes>
              <useMLLPv2>false</useMLLPv2>
              <ackBytes>06</ackBytes>
              <nackBytes>15</nackBytes>
              <maxRetries>2</maxRetries>
            </transmissionModeProperties>
            <remoteAddress>127.0.0.1</remoteAddress>
            <remotePort>2200</remotePort>
            <overrideLocalBinding>false</overrideLocalBinding>
            <localAddress>0.0.0.0</localAddress>
            <localPort>0</localPort>
            <sendTimeout>5000</sendTimeout>
            <bufferSize>65536</bufferSize>
            <keepConnectionOpen>false</keepConnectionOpen>
            <checkRemoteHost>false</checkRemoteHost>
            <responseTimeout>5000</responseTimeout>
            <ignoreResponse>false</ignoreResponse>
            <queueOnResponseTimeout>true</queueOnResponseTimeout>
            <dataTypeBinary>false</dataTypeBinary>
            <charsetEncoding>DEFAULT_ENCODING</charsetEncoding>
            <template>${message.encodedData}</template>
          </properties>
          <transformer version="3.8.0">
            <elements>
              <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
                <name>Codigo_Exame</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <variable>Codigo_Exame</variable>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.4&apos;][&apos;OBR.4.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
                <scope>CHANNEL</scope>
              </com.mirth.connect.plugins.mapper.MapperStep>
              <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
                <name>ID_Paciente</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <variable>ID_Paciente</variable>
                <mapping>msg[&apos;PID&apos;][&apos;PID.3&apos;][0][&apos;PID.3.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
                <scope>CHANNEL</scope>
              </com.mirth.connect.plugins.mapper.MapperStep>
            </elements>
            <inboundTemplate encoding="base64">TVNIfF5+XCZ8RU5TQkx8SVBPTHxTaWlNQXxGSVJTVHwyMDE5MDcyNDEyMzQxNXx8T01HXk8xOV5P
TUdfTzE5fDliZGMyNDEyLTM2ZDMtNDFiYS05MGJiLTM5OTQ1NmUyZDRmZHxQfDIuNXx8fEFMClBJ
RHwxfHwxMDQ2MjE1Xl5eU09OSE9eTlN+MzY3MjI3NzY5Xl5eUk5VXlNOU3x8QUxCSU5PIE1BUlRJ
TlMgRkVSUkVJUkEgQUxDQVJJQV5BTkFeUklUQV5eXl5MfHwxOTY0MTAwODAwMDAwMHxGfHx8UlVB
IERFIENBQk8gVkVSREUgTiAgMjcgLUEgLSA1ICBFXl5TRVRcWERBXEJBTF5eMjkwMC0wNzJeUFRe
UE9SVFVHVUVTQV5efHxeUFJOXlBIXl5eXl5eXl5eMjY1NDAwNDQ4fl5QUk5eQ1BeXl5eXl5eXl45
MTgxNDY3MzZ8fHx8fDEyNTIwNTNeXl5TT05IT3x8fHx8fHx8fHx8fApQVjF8MXxDT058fHx8fDQx
MjBeQ0FTVFJPXk1BRkFMREFeXl5eXl5TT05IT341MjU2NF5DQVNUUk9eTUFGQUxEQV5eXl5eXk4u
T3JkZW1+NjQzODVeQ0FTVFJPXk1BRkFMREFeXl5eXl5OLk1lY2Fub2dyXFhFMVxmaWNvfHx8MjAw
MTV8fHx8M3x8fHx8MTI0NjEzMjZeXl5TT05IT3x8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHwyMDE5
MDYyNDEyMjAwMHx8fHx8fHxWCklOMXwxfDkzNTYwMV5TTlNeU09OSE98fHx8fHx8fHx8fHx8fHx8
fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fDM2NzIyNzc2OV5eXlNPTkhPCk9SQ3xTQ3wy
OTAyNDY2XlNDSEVEVUxJTkd8MTU3NTYxNjZeU09OSE98fElQfHx8fHwxNTk4XkNBUkRPU09eTUFS
Q08gUEFVTE8gR09NRVNeXl5eXl5TT05IT342MjEwMF5DQVJET1NPXk1BUkNPIFBBVUxPIEdPTUVT
Xl5eXl5eTi5NZWNhbm9nclxYRTFcZmljb3x8MTU5OF5DQVJET1NPXk1BUkNPIFBBVUxPIEdPTUVT
Xl5eXl5eU09OSE9+NjIxMDBeQ0FSRE9TT15NQVJDTyBQQVVMTyBHT01FU15eXl5eXk4uTWVjYW5v
Z3JcWEUxXGZpY298Xl5eMzExNzA0MF5eXl5eXklQTyBGcmFuY2lzY28gR2VudGlsLCBFLlAuRS4m
MXx8fHwzMTE3MDQwXklQTyBMaXNib2EgLSBDb25zdWx0YXx8fHx8fHx8fHx8fE1SXkV4YW1lIEVm
ZXRpdmFkb15TT05ITwpUUTF8fDFeVW58fHx8fDIwMTkwNzI0MTAwMDAwCk9CUnwxfDI5MDI0NjZe
U0NIRURVTElOR3wxNTc1NjE2Nl5TT05IT3w0MDMwMV5FQ0cgU0lNUExFUyBERSAxMiBERVJJVkFc
WEM3XFxYRDVcRVNeU09OSE9eOF5DQVJESU9MT0dJQSAtICBBQ1RPUyBESUFHTlxYRDNcU1RJQ09T
fHx8fHx8fHx8</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.8.0">
            <elements/>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.8.0">
            <elements>
              <com.mirth.connect.plugins.rulebuilder.RuleBuilderRule version="3.8.0">
                <name>Accept message if &quot;msg[&apos;MSH&apos;][&apos;MSH.4&apos;][&apos;MSH.4.1&apos;].toString()&quot; exists</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <field>msg[&apos;MSH&apos;][&apos;MSH.4&apos;][&apos;MSH.4.1&apos;].toString()</field>
                <condition>EXISTS</condition>
                <values/>
              </com.mirth.connect.plugins.rulebuilder.RuleBuilderRule>
              <com.mirth.connect.plugins.rulebuilder.RuleBuilderRule version="3.8.0">
                <name>Accept message if &quot;msg[&apos;MSH&apos;][&apos;MSH.9&apos;][&apos;MSH.9.1&apos;].toString()&quot; equals &quot;OMG&quot;</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <operator>AND</operator>
                <field>msg[&apos;MSH&apos;][&apos;MSH.9&apos;][&apos;MSH.9.1&apos;].toString()</field>
                <condition>EQUALS</condition>
                <values>
                  <string>&quot;OMG&quot;</string>
                </values>
              </com.mirth.connect.plugins.rulebuilder.RuleBuilderRule>
            </elements>
          </filter>
          <transportName>TCP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
message = message.replace(/\\XE3\\/g, &quot;ã&quot;);
message = message.replace(/\\XC3\\/g, &quot;Ã&quot;);
message = message.replace(/\\XE7\\/g, &quot;ç&quot;);
message = message.replace(/\\XC7\\/g, &quot;Ç&quot;);
message = message.replace(/\\XE9\\/g, &quot;é&quot;);
message = message.replace(/\\XC9\\/g, &quot;É&quot;);
message = message.replace(/\\XE1\\/g, &quot;á&quot;);
message = message.replace(/\\XC1\\/g, &quot;Á&quot;);
message = message.replace(/\\XF5\\/g, &quot;õ&quot;);
message = message.replace(/\\XD5\\/g, &quot;Õ&quot;);
message = message.replace(/\\XD3\\/g, &quot;Ó&quot;);
message = message.replace(/\\XF3\\/g, &quot;ó&quot;);
message = message.replace(/\\XBA\\/g, &quot;º&quot;);
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.8.0">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>COD_EXAME</name>
            <type>STRING</type>
            <mappingName>Codigo_Exame</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>ID_PACIENTE</name>
            <type>STRING</type>
            <mappingName>ID_Paciente</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.8.0">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1567692054159</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <pruneMetaDataDays>30</pruneMetaDataDays>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.8.0">
      <id>64e3eada-7d02-4b3e-a979-e4132365650d</id>
      <nextMetaDataId>11</nextMetaDataId>
      <name>IPO LX - MIRTH to ENSEMBLE V4 23102019</name>
      <description></description>
      <revision>102</revision>
      <sourceConnector version="3.8.0">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.tcp.TcpReceiverProperties" version="3.8.0">
          <pluginProperties/>
          <listenerConnectorProperties version="3.8.0">
            <host>0.0.0.0</host>
            <port>2205</port>
          </listenerConnectorProperties>
          <sourceConnectorProperties version="3.8.0">
            <responseVariable>Auto-generate (After source transformer)</responseVariable>
            <respondAfterProcessing>true</respondAfterProcessing>
            <processBatch>false</processBatch>
            <firstResponse>true</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <transmissionModeProperties class="com.mirth.connect.plugins.mllpmode.MLLPModeProperties">
            <pluginPointName>MLLP</pluginPointName>
            <startOfMessageBytes>0B</startOfMessageBytes>
            <endOfMessageBytes>1C0D</endOfMessageBytes>
            <useMLLPv2>false</useMLLPv2>
            <ackBytes>06</ackBytes>
            <nackBytes>15</nackBytes>
            <maxRetries>2</maxRetries>
          </transmissionModeProperties>
          <serverMode>true</serverMode>
          <remoteAddress></remoteAddress>
          <remotePort></remotePort>
          <overrideLocalBinding>false</overrideLocalBinding>
          <reconnectInterval>5000</reconnectInterval>
          <receiveTimeout>0</receiveTimeout>
          <bufferSize>65536</bufferSize>
          <maxConnections>10</maxConnections>
          <keepConnectionOpen>true</keepConnectionOpen>
          <dataTypeBinary>false</dataTypeBinary>
          <charsetEncoding>DEFAULT_ENCODING</charsetEncoding>
          <respondOnNewConnection>0</respondOnNewConnection>
          <responseAddress></responseAddress>
          <responsePort></responsePort>
        </properties>
        <transformer version="3.8.0">
          <elements>
            <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.8.0">
              <name>caminhoFicheiroPDF</name>
              <sequenceNumber>0</sequenceNumber>
              <enabled>true</enabled>
              <script>var caminhoFicheiroPDF = msg[&apos;OBX&apos;][&apos;OBX.6&apos;][&apos;OBX.6.1&apos;].toString()
caminhoFicheiroPDF = caminhoFicheiroPDF.substring(0, caminhoFicheiroPDF.lastIndexOf(&apos;\\&apos;));
channelMap.put(&quot;caminhoFicheiroPDF&quot;, caminhoFicheiroPDF);

var nomeFicheiroPDF = msg[&apos;OBX&apos;][&apos;OBX.6&apos;][&apos;OBX.6.1&apos;].toString()
nomeFicheiroPDF = nomeFicheiroPDF.substring(nomeFicheiroPDF.lastIndexOf(&apos;\\&apos;)+1, nomeFicheiroPDF.lastIndexOf(&apos;.&apos;)) + &quot;.pdf&quot;;
channelMap.put(&quot;nomeFicheiroPDF&quot;, nomeFicheiroPDF);</script>
            </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
              <name>PatientID</name>
              <sequenceNumber>1</sequenceNumber>
              <enabled>true</enabled>
              <variable>PatientID</variable>
              <mapping>msg[&apos;PID&apos;][&apos;PID.3&apos;][&apos;PID.3.1&apos;].toString()</mapping>
              <defaultValue></defaultValue>
              <replacements/>
              <scope>CHANNEL</scope>
            </com.mirth.connect.plugins.mapper.MapperStep>
            <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
              <name>PatientFamilyName</name>
              <sequenceNumber>2</sequenceNumber>
              <enabled>true</enabled>
              <variable>PatientFamilyName</variable>
              <mapping>msg[&apos;PID&apos;][&apos;PID.5&apos;][&apos;PID.5.1&apos;].toString()</mapping>
              <defaultValue></defaultValue>
              <replacements/>
              <scope>CHANNEL</scope>
            </com.mirth.connect.plugins.mapper.MapperStep>
            <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
              <name>PatientGivenName</name>
              <sequenceNumber>3</sequenceNumber>
              <enabled>true</enabled>
              <variable>PatientGivenName</variable>
              <mapping>msg[&apos;PID&apos;][&apos;PID.5&apos;][&apos;PID.5.2&apos;].toString()</mapping>
              <defaultValue></defaultValue>
              <replacements/>
              <scope>CHANNEL</scope>
            </com.mirth.connect.plugins.mapper.MapperStep>
            <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
              <name>PatientBirthDate</name>
              <sequenceNumber>4</sequenceNumber>
              <enabled>true</enabled>
              <variable>PatientBirthDate</variable>
              <mapping>msg[&apos;PID&apos;][&apos;PID.7&apos;][&apos;PID.7.1&apos;].toString()</mapping>
              <defaultValue></defaultValue>
              <replacements/>
              <scope>CHANNEL</scope>
            </com.mirth.connect.plugins.mapper.MapperStep>
            <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
              <name>PatientSex</name>
              <sequenceNumber>5</sequenceNumber>
              <enabled>true</enabled>
              <variable>PatientSex</variable>
              <mapping>msg[&apos;PID&apos;][&apos;PID.8&apos;][&apos;PID.8.1&apos;].toString()</mapping>
              <defaultValue></defaultValue>
              <replacements/>
              <scope>CHANNEL</scope>
            </com.mirth.connect.plugins.mapper.MapperStep>
            <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
              <name>StudyDate</name>
              <sequenceNumber>6</sequenceNumber>
              <enabled>true</enabled>
              <variable>StudyDate</variable>
              <mapping>msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().substring(0, 7)</mapping>
              <defaultValue></defaultValue>
              <replacements/>
              <scope>CHANNEL</scope>
            </com.mirth.connect.plugins.mapper.MapperStep>
            <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
              <name>StudyTime</name>
              <sequenceNumber>7</sequenceNumber>
              <enabled>true</enabled>
              <variable>StudyTime</variable>
              <mapping>msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().substring(8, 14)</mapping>
              <defaultValue></defaultValue>
              <replacements/>
              <scope>CHANNEL</scope>
            </com.mirth.connect.plugins.mapper.MapperStep>
            <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
              <name>ReferringPhysicianGivenName</name>
              <sequenceNumber>8</sequenceNumber>
              <enabled>true</enabled>
              <variable>ReferringPhysicianGivenName</variable>
              <mapping>msg[&apos;OBR&apos;][&apos;OBR.16&apos;][&apos;OBR.16.2&apos;].toString()</mapping>
              <defaultValue></defaultValue>
              <replacements/>
              <scope>CHANNEL</scope>
            </com.mirth.connect.plugins.mapper.MapperStep>
            <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
              <name>ReferringPhysicianFamilyName</name>
              <sequenceNumber>9</sequenceNumber>
              <enabled>true</enabled>
              <variable>ReferringPhysicianFamilyName</variable>
              <mapping>msg[&apos;OBR&apos;][&apos;OBR.16&apos;][&apos;OBR.16.3&apos;].toString()</mapping>
              <defaultValue></defaultValue>
              <replacements/>
              <scope>CHANNEL</scope>
            </com.mirth.connect.plugins.mapper.MapperStep>
            <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
              <name>AccessionNumber</name>
              <sequenceNumber>10</sequenceNumber>
              <enabled>true</enabled>
              <variable>AccessionNumber</variable>
              <mapping>&quot;ECG&quot;+ msg[&apos;OBR&apos;][&apos;OBR.18&apos;][&apos;OBR.18.1&apos;].toString()</mapping>
              <defaultValue></defaultValue>
              <replacements/>
              <scope>CHANNEL</scope>
            </com.mirth.connect.plugins.mapper.MapperStep>
            <com.mirth.connect.plugins.mapper.MapperStep version="3.8.0">
              <name>StudyID</name>
              <sequenceNumber>11</sequenceNumber>
              <enabled>true</enabled>
              <variable>StudyID</variable>
              <mapping>msg[&apos;OBR&apos;][&apos;OBR.4&apos;][&apos;OBR.4.1&apos;].toString()</mapping>
              <defaultValue></defaultValue>
              <replacements/>
              <scope>CHANNEL</scope>
            </com.mirth.connect.plugins.mapper.MapperStep>
          </elements>
          <inboundTemplate encoding="base64">TVNIfF5+XCZ8U2VudGluZWx8Q2FyZGlvbG9neXxXSVNFfElQT0x8MjAxOTA4MDIwODI0MzB8fE9S
VV5SMDF8MTkwODAyMDgyNDMwMDAwMDAzfFB8Mi4zLjF8fHx8QUx8fHw4ODU5MS8xClBJRHx8fDEw
NDYyMTVeXl5JUE9MfHxBTEJJTk8gTUFSVElOUyBGRVJSRUlSQSBBTENBUklBXkFOQV5SSVRBfHwx
OTY0MTAwOHxGfHx8UlVBIERFIENBQk8gVkVSREUgTiAgMjcgLUEgLSA1ICBFXl5TRVRcWERBXEJB
TF5eMjkwMC0wNzJeUFR8fDI2NTQwMDQ0OFxSXHx8fHx8MTI1MjA1MwpQVjF8MXxDT058fHx8fDUy
NTY0XkNBU1RST15NQUZBTERBfHx8fHx8fHx8fHx8MTI0NjEzMjZeU09OSE98fHx8fHx8fHx8fHx8
fHx8fHx8fHx8fHx8MjAxOTA2MjQxMjIwMDAKT1JDfFNDfGFiZmIyYTZjLTE3ODUtNGRlNy1hMmM5
LWVkZTk5MjE5MDg4OHwxNTc1NjE2Nl5TT05IT3x8Rnx8fHx8fHw1MjU2NF5DQVNUUk9eTUFGQUxE
QQpPQlJ8MXxFQ0cyOTAyNDY2XlNDSEVEVUxJTkd8MTU3NTYxNjZeU09OSE98NDAzMDFeRUNHIFNJ
TVBMRVMgREUgMTIgREVSSVZBXFhDN1xcWEQ1XEVTfHx8MjAxOTA4MDIwODI0MDB8fHx8fHx8fHw1
MjU2NF5DQVNUUk9eTUFGQUxEQXx8RUNHMjkwMjQ2Nl5TQ0hFRFVMSU5HfDQwMzAxfHxDQVJEX1Nl
bnRpbmVsfDIwMTkwODAyMDgyNDA3fHx8Rnx8fHx8fHxeU3BhY2VtZWRpY2FsXkFUSApUUTF8fHx8
fHx8MjAxOTA4MDIwODI0MDAKT0JYfHxUWHx8fFJlbGF0XFhGM1xyaW8gZGlzcG9uw612ZWwgY29t
byBpbWFnZW0gZG8gZXhhbWV8fHx8fHxGClpFSXw0MDMwMQ0=</inboundTemplate>
          <outboundTemplate encoding="base64"></outboundTemplate>
          <inboundDataType>HL7V2</inboundDataType>
          <outboundDataType>HL7V2</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
              <handleRepetitions>true</handleRepetitions>
              <handleSubcomponents>true</handleSubcomponents>
              <useStrictParser>false</useStrictParser>
              <useStrictValidation>false</useStrictValidation>
              <stripNamespaces>true</stripNamespaces>
              <segmentDelimiter>\r</segmentDelimiter>
              <convertLineBreaks>true</convertLineBreaks>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
              <useStrictParser>false</useStrictParser>
              <useStrictValidation>false</useStrictValidation>
              <segmentDelimiter>\r</segmentDelimiter>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
              <splitType>MSH_Segment</splitType>
              <batchScript></batchScript>
            </batchProperties>
            <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
              <segmentDelimiter>\r</segmentDelimiter>
              <successfulACKCode>AA</successfulACKCode>
              <successfulACKMessage></successfulACKMessage>
              <errorACKCode>AE</errorACKCode>
              <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
              <rejectedACKCode>AR</rejectedACKCode>
              <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
              <msh15ACKAccept>false</msh15ACKAccept>
              <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
            </responseGenerationProperties>
            <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
              <successfulACKCode>AA,CA</successfulACKCode>
              <errorACKCode>AE,CE</errorACKCode>
              <rejectedACKCode>AR,CR</rejectedACKCode>
              <validateMessageControlId>true</validateMessageControlId>
              <originalMessageControlId>Destination_Encoded</originalMessageControlId>
              <originalIdMapVariable></originalIdMapVariable>
            </responseValidationProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
              <handleRepetitions>true</handleRepetitions>
              <handleSubcomponents>true</handleSubcomponents>
              <useStrictParser>false</useStrictParser>
              <useStrictValidation>false</useStrictValidation>
              <stripNamespaces>true</stripNamespaces>
              <segmentDelimiter>\r</segmentDelimiter>
              <convertLineBreaks>true</convertLineBreaks>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
              <useStrictParser>false</useStrictParser>
              <useStrictValidation>false</useStrictValidation>
              <segmentDelimiter>\r</segmentDelimiter>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
              <splitType>MSH_Segment</splitType>
              <batchScript></batchScript>
            </batchProperties>
            <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
              <segmentDelimiter>\r</segmentDelimiter>
              <successfulACKCode>AA</successfulACKCode>
              <successfulACKMessage></successfulACKMessage>
              <errorACKCode>AE</errorACKCode>
              <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
              <rejectedACKCode>AR</rejectedACKCode>
              <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
              <msh15ACKAccept>false</msh15ACKAccept>
              <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
            </responseGenerationProperties>
            <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
              <successfulACKCode>AA,CA</successfulACKCode>
              <errorACKCode>AE,CE</errorACKCode>
              <rejectedACKCode>AR,CR</rejectedACKCode>
              <validateMessageControlId>true</validateMessageControlId>
              <originalMessageControlId>Destination_Encoded</originalMessageControlId>
              <originalIdMapVariable></originalIdMapVariable>
            </responseValidationProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.8.0">
          <elements/>
        </filter>
        <transportName>TCP Listener</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.8.0">
          <metaDataId>3</metaDataId>
          <name>ORM para Sectra</name>
          <properties class="com.mirth.connect.connectors.tcp.TcpDispatcherProperties" version="3.8.0">
            <pluginProperties/>
            <destinationConnectorProperties version="3.8.0">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>true</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <transmissionModeProperties class="com.mirth.connect.plugins.mllpmode.MLLPModeProperties">
              <pluginPointName>MLLP</pluginPointName>
              <startOfMessageBytes>0B</startOfMessageBytes>
              <endOfMessageBytes>1C0D</endOfMessageBytes>
              <useMLLPv2>false</useMLLPv2>
              <ackBytes>06</ackBytes>
              <nackBytes>15</nackBytes>
              <maxRetries>2</maxRetries>
            </transmissionModeProperties>
            <remoteAddress>127.0.0.1</remoteAddress>
            <remotePort>8888</remotePort>
            <overrideLocalBinding>false</overrideLocalBinding>
            <localAddress>0.0.0.0</localAddress>
            <localPort>0</localPort>
            <sendTimeout>5000</sendTimeout>
            <bufferSize>65536</bufferSize>
            <keepConnectionOpen>false</keepConnectionOpen>
            <checkRemoteHost>false</checkRemoteHost>
            <responseTimeout>5000</responseTimeout>
            <ignoreResponse>false</ignoreResponse>
            <queueOnResponseTimeout>true</queueOnResponseTimeout>
            <dataTypeBinary>false</dataTypeBinary>
            <charsetEncoding>DEFAULT_ENCODING</charsetEncoding>
            <template>${message.encodedData}</template>
          </properties>
          <transformer version="3.8.0">
            <elements>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Message Header - Date/Time of Message - Time of An Event (MSH.7.1) (out)</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;MSH&apos;][&apos;MSH.7&apos;][&apos;MSH.7.1&apos;]</messageSegment>
                <mapping>msg[&apos;MSH&apos;][&apos;MSH.7&apos;][&apos;MSH.7.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Message Header - Message Control ID - Value (MSH.10.1) (out)</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;MSH&apos;][&apos;MSH.10&apos;][&apos;MSH.10.1&apos;]</messageSegment>
                <mapping>msg[&apos;MSH&apos;][&apos;MSH.10&apos;][&apos;MSH.10.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Message Header - Application Acknowledgment Type - Value (MSH.16.1) (out)</name>
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;MSH&apos;][&apos;MSH.16&apos;][&apos;MSH.16.1&apos;]</messageSegment>
                <mapping>msg[&apos;MSH&apos;][&apos;MSH.16&apos;][&apos;MSH.16.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Message Header - Character Set - Value (MSH.18.1) (out)</name>
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;MSH&apos;][&apos;MSH.18&apos;][&apos;MSH.18.1&apos;]</messageSegment>
                <mapping>msg[&apos;MSH&apos;][&apos;MSH.19&apos;][&apos;MSH.19.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Patient Identifier List - ID (PID.3.1) (out)</name>
                <sequenceNumber>4</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.3&apos;][&apos;PID.3.1&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.3&apos;][&apos;PID.3.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Patient Identifier List - Assigning Authority (PID.3.4) (out)</name>
                <sequenceNumber>5</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.3&apos;][&apos;PID.3.4&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.3&apos;][&apos;PID.3.4&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Patient Name - Family Last Name (PID.5.1) (out)</name>
                <sequenceNumber>6</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.5&apos;][&apos;PID.5.1&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.5&apos;][&apos;PID.5.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Patient Name - Given Name (PID.5.2) (out)</name>
                <sequenceNumber>7</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.5&apos;][&apos;PID.5.2&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.5&apos;][&apos;PID.5.2&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Date/Time of Birth - Time of An Event (PID.7.1) (out)</name>
                <sequenceNumber>8</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.7&apos;][&apos;PID.7.1&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.7&apos;][&apos;PID.7.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Sex - Value (PID.8.1) (out)</name>
                <sequenceNumber>9</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.8&apos;][&apos;PID.8.1&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.8&apos;][&apos;PID.8.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Patient Address - Street Address (PID.11.1) (out)</name>
                <sequenceNumber>10</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.1&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Patient Address - City (PID.11.3) (out)</name>
                <sequenceNumber>11</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.3&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.3&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Patient Address - State or Province (PID.11.4) (out)</name>
                <sequenceNumber>12</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.4&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.4&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Patient Address - Zip or Postal Code (PID.11.5) (out)</name>
                <sequenceNumber>13</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.5&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.5&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Patient Address - Country (PID.11.6) (out)</name>
                <sequenceNumber>14</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.6&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.6&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Phone Number - Home - [(999)] 999-9999 [x99999][c Any Text] (PID.13.1) (out)</name>
                <sequenceNumber>15</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.13&apos;][&apos;PID.13.1&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.13&apos;][&apos;PID.13.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Identification - Patient Account Number - ID (PID.18.1) (out)</name>
                <sequenceNumber>16</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PID&apos;][&apos;PID.18&apos;][&apos;PID.18.1&apos;]</messageSegment>
                <mapping>msg[&apos;PID&apos;][&apos;PID.18&apos;][&apos;PID.18.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Visit - Set ID - Value (PV1.1.1) (out)</name>
                <sequenceNumber>17</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PV1&apos;][&apos;PV1.1&apos;][&apos;PV1.1.1&apos;]</messageSegment>
                <mapping>msg[&apos;PV1&apos;][&apos;PV1.1&apos;][&apos;PV1.1.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Visit - Patient Class - Value (PV1.2.1) (out)</name>
                <sequenceNumber>18</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PV1&apos;][&apos;PV1.2&apos;][&apos;PV1.2.1&apos;]</messageSegment>
                <mapping>msg[&apos;PV1&apos;][&apos;PV1.2&apos;][&apos;PV1.2.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Visit - Referring Doctor - ID Number (ST) (PV1.8.1) (out)</name>
                <sequenceNumber>19</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PV1&apos;][&apos;PV1.8&apos;][&apos;PV1.8.1&apos;]</messageSegment>
                <mapping>msg[&apos;PV1&apos;][&apos;PV1.7&apos;][&apos;PV1.7.1&apos;].toString()</mapping>
                <defaultValue>&quot;&quot;</defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Visit - Referring Doctor - Family Last Name (PV1.8.2) (out)</name>
                <sequenceNumber>20</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PV1&apos;][&apos;PV1.8&apos;][&apos;PV1.8.2&apos;]</messageSegment>
                <mapping>msg[&apos;PV1&apos;][&apos;PV1.7&apos;][&apos;PV1.7.2&apos;].toString()</mapping>
                <defaultValue>&quot;&quot;</defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Visit - Referring Doctor - Given Name (PV1.8.3) (out)</name>
                <sequenceNumber>21</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PV1&apos;][&apos;PV1.8&apos;][&apos;PV1.8.3&apos;]</messageSegment>
                <mapping>msg[&apos;PV1&apos;][&apos;PV1.7&apos;][&apos;PV1.7.3&apos;].toString()</mapping>
                <defaultValue>&quot;&quot;</defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Visit - Visit Number - ID (PV1.19.1) (out)</name>
                <sequenceNumber>22</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PV1&apos;][&apos;PV1.19&apos;][&apos;PV1.19.1&apos;]</messageSegment>
                <mapping>msg[&apos;PV1&apos;][&apos;PV1.19&apos;][&apos;PV1.19.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Visit - Visit Number - Check Digit (PV1.19.2) (out)</name>
                <sequenceNumber>23</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PV1&apos;][&apos;PV1.19&apos;][&apos;PV1.19.2&apos;]</messageSegment>
                <mapping>msg[&apos;PV1&apos;][&apos;PV1.19&apos;][&apos;PV1.19.2&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Patient Visit - Admit Date/Time - Time of An Event (PV1.44.1) (out)</name>
                <sequenceNumber>24</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;PV1&apos;][&apos;PV1.44&apos;][&apos;PV1.44.1&apos;]</messageSegment>
                <mapping>msg[&apos;PV1&apos;][&apos;PV1.44&apos;][&apos;PV1.44.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Common Order - Order Control - Value (ORC.1.1) (out)</name>
                <sequenceNumber>25</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;ORC&apos;][&apos;ORC.1&apos;][&apos;ORC.1.1&apos;]</messageSegment>
                <mapping>&quot;NW&quot;</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Common Order - Placer Order Number - Entity Identifier (ORC.2.1) (out)</name>
                <sequenceNumber>26</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;ORC&apos;][&apos;ORC.2&apos;][&apos;ORC.2.1&apos;]</messageSegment>
                <mapping>msg[&apos;ORC&apos;][&apos;ORC.2&apos;][&apos;ORC.2.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Common Order - Filler Order Number - Entity Identifier (ORC.3.1) (out)</name>
                <sequenceNumber>27</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;ORC&apos;][&apos;ORC.3&apos;][&apos;ORC.3.1&apos;]</messageSegment>
                <mapping>msg[&apos;ORC&apos;][&apos;ORC.3&apos;][&apos;ORC.3.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Common Order - Filler Order Number -Namespace ID (ORC.3.2) (out)</name>
                <sequenceNumber>28</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;ORC&apos;][&apos;ORC.3&apos;][&apos;ORC.3.2&apos;]</messageSegment>
                <mapping>msg[&apos;ORC&apos;][&apos;ORC.3&apos;][&apos;ORC.3.2&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Common Order - Order Status - Value (ORC.5.1) (out)</name>
                <sequenceNumber>29</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;ORC&apos;][&apos;ORC.5&apos;][&apos;ORC.5.1&apos;]</messageSegment>
                <mapping>&quot;AGD&quot;</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Common Order - Verified By - ID Number (ST) (ORC.11.1) (out)</name>
                <sequenceNumber>30</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;ORC&apos;][&apos;ORC.11&apos;][&apos;ORC.11.1&apos;]</messageSegment>
                <mapping>msg[&apos;ORC&apos;][&apos;ORC.11&apos;][&apos;ORC.11.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Common Order - Ordering Provider - ID Number (ST) (ORC.12.1) (out)</name>
                <sequenceNumber>31</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;ORC&apos;][&apos;ORC.12&apos;][&apos;ORC.12.1&apos;]</messageSegment>
                <mapping>msg[&apos;ORC&apos;][&apos;ORC.12&apos;][&apos;ORC.12.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Common Order - Ordering Provider - Family Last Name (ST) (ORC.12.2) (out)</name>
                <sequenceNumber>32</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;ORC&apos;][&apos;ORC.12&apos;][&apos;ORC.12.2&apos;]</messageSegment>
                <mapping>msg[&apos;ORC&apos;][&apos;ORC.12&apos;][&apos;ORC.12.2&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Common Order - Ordering Provider - Given Name (ST) (ORC.12.3) (out)</name>
                <sequenceNumber>33</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;ORC&apos;][&apos;ORC.12&apos;][&apos;ORC.12.3&apos;]</messageSegment>
                <mapping>msg[&apos;ORC&apos;][&apos;ORC.12&apos;][&apos;ORC.12.3&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Set ID - Value (OBR.1.1) (out)</name>
                <sequenceNumber>34</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.1&apos;][&apos;OBR.1.1&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.1&apos;][&apos;OBR.1.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Placer Order Number - Entity Identifier (OBR.2.1) (out)</name>
                <sequenceNumber>35</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.2&apos;][&apos;OBR.2.1&apos;]</messageSegment>
                <mapping>&quot;ECG&quot; + msg[&apos;OBR&apos;][&apos;OBR.2&apos;][&apos;OBR.2.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Placer Order Number - Namespace ID (OBR.2.2) (out)</name>
                <sequenceNumber>36</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.2&apos;][&apos;OBR.2.2&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.2&apos;][&apos;OBR.2.2&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Filler Order Number - Entity Identifier (OBR.3.1) (out)</name>
                <sequenceNumber>37</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.3&apos;][&apos;OBR.3.1&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.3&apos;][&apos;OBR.3.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Universal Service ID - Identifier (OBR.4.1) (out)</name>
                <sequenceNumber>38</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.4&apos;][&apos;OBR.4.1&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.4&apos;][&apos;OBR.4.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Universal Service ID - Text (OBR.4.2) (out)</name>
                <sequenceNumber>39</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.4&apos;][&apos;OBR.4.2&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.4&apos;][&apos;OBR.4.2&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Observation Date/Time # - Time of An Event (OBR.7.1) (out)</name>
                <sequenceNumber>40</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Ordering Provider - ID Number (ST) (OBR.16.1) (out)</name>
                <sequenceNumber>41</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.16&apos;][&apos;OBR.16.1&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.16&apos;][&apos;OBR.16.1&apos;].toString()</mapping>
                <defaultValue>&quot;&quot;</defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Ordering Provider - Family Last Name (OBR.16.2) (out)</name>
                <sequenceNumber>42</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.16&apos;][&apos;OBR.16.2&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.16&apos;][&apos;OBR.16.2&apos;].toString()</mapping>
                <defaultValue>&quot;&quot;</defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Ordering Provider - Given Name (OBR.16.3) (out)</name>
                <sequenceNumber>43</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.16&apos;][&apos;OBR.16.3&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.16&apos;][&apos;OBR.16.3&apos;].toString()</mapping>
                <defaultValue>&quot;&quot;</defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Placer Field 1 - Value (OBR.16.14) (out)</name>
                <sequenceNumber>44</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.16&apos;][&apos;OBR.16.14&apos;][&apos;OBR.16.14.2&apos;]</messageSegment>
                <mapping>&quot;&quot;</mapping>
                <defaultValue>&quot;&quot;</defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Placer Field 1 - Value (OBR.18.1) (out)</name>
                <sequenceNumber>45</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.18&apos;][&apos;OBR.18.1&apos;]</messageSegment>
                <mapping>&quot;ECG&quot; +  msg[&apos;OBR&apos;][&apos;OBR.2&apos;][&apos;OBR.2.1&apos;].toString()</mapping>
                <defaultValue>&quot;&quot;</defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Placer Field 2 - Value (OBR.19.1) (out)</name>
                <sequenceNumber>46</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.19&apos;][&apos;OBR.19.1&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.4&apos;][&apos;OBR.4.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Filler Field 2 + - Value (OBR.21.1) (out)</name>
                <sequenceNumber>47</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.21&apos;][&apos;OBR.21.1&apos;]</messageSegment>
                <mapping>&quot;ECG&quot;</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Results Rpt/Status Chng - Date/Time + - Time of An Event (OBR.22.1) (out)</name>
                <sequenceNumber>48</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.22&apos;][&apos;OBR.22.1&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.22&apos;][&apos;OBR.22.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Result Status + - Value (OBR.25.1) (out)</name>
                <sequenceNumber>49</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.25&apos;][&apos;OBR.25.1&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.25&apos;][&apos;OBR.25.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Quantity/Timing - Start Date/Time (OBR.27.4) (out)</name>
                <sequenceNumber>50</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.27&apos;][&apos;OBR.27.4&apos;]</messageSegment>
                <mapping>&quot;&quot;</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>Observation Request - Reason For Study - Text (OBR.31.2) (out)</name>
                <sequenceNumber>51</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.31&apos;][&apos;OBR.31.2&apos;]</messageSegment>
                <mapping>&quot;&quot;</mapping>
                <defaultValue>&quot;&quot;</defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>OBR 32</name>
                <sequenceNumber>52</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>tmp[&apos;OBR&apos;][&apos;OBR.32&apos;]</messageSegment>
                <mapping>&quot;&amp;&quot; + msg[&apos;OBR&apos;][&apos;OBR.32&apos;][&apos;OBR.32.1&apos;].toString() + &quot;&amp;&quot; + msg[&apos;OBR&apos;][&apos;OBR.32&apos;][&apos;OBR.32.2&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
            </elements>
            <inboundTemplate encoding="base64">TVNIfF5+XCZ8U2VudGluZWx8Q2FyZGlvbG9neXxXSVNFfElQT0x8MjAxOTA4MDIwODI0MzB8fE9S
VV5SMDF8MTkwODAyMDgyNDMwMDAwMDAzfFB8Mi4zLjF8fHx8QUx8fHw4ODU5MS8xClBJRHx8fDEw
NDYyMTVeXl5JUE9MfHxBTEJJTk8gTUFSVElOUyBGRVJSRUlSQSBBTENBUklBXkFOQV5SSVRBfHwx
OTY0MTAwOHxGfHx8UlVBIERFIENBQk8gVkVSREUgTiAgMjcgLUEgLSA1ICBFXl5TRVRcWERBXEJB
TF5eMjkwMC0wNzJeUFR8fDI2NTQwMDQ0OFxSXHx8fHx8MTI1MjA1MwpQVjF8MXxDT058fHx8fDUy
NTY0XkNBU1RST15NQUZBTERBfHx8fHx8fHx8fHx8MTI0NjEzMjZeU09OSE98fHx8fHx8fHx8fHx8
fHx8fHx8fHx8fHx8MjAxOTA2MjQxMjIwMDAKT1JDfFNDfGFiZmIyYTZjLTE3ODUtNGRlNy1hMmM5
LWVkZTk5MjE5MDg4OHwxNTc1NjE2Nl5TT05IT3x8Rnx8fHx8fHw1MjU2NF5DQVNUUk9eTUFGQUxE
QQpPQlJ8MXxFQ0cyOTAyNDY2XlNDSEVEVUxJTkd8MTU3NTYxNjZeU09OSE98NDAzMDFeRUNHIFNJ
TVBMRVMgREUgMTIgREVSSVZBXFhDN1xcWEQ1XEVTfHx8MjAxOTA4MDIwODI0MDB8fHx8fHx8fHw1
MjU2NF5DQVNUUk9eTUFGQUxEQXx8RUNHMjkwMjQ2Nl5TQ0hFRFVMSU5HfDQwMzAxfHxDQVJEX1Nl
bnRpbmVsfDIwMTkwODAyMDgyNDA3fHx8Rnx8fHx8fHxeU3BhY2VtZWRpY2FsXkFUSApUUTF8fHx8
fHx8MjAxOTA4MDIwODI0MDAKT0JYfHxUWHx8fFJlbGF0XFhGM1xyaW8gZGlzcG9uw612ZWwgY29t
byBpbWFnZW0gZG8gZXhhbWV8fHx8fHxGClpFSXw0MDMwMQo=</inboundTemplate>
            <outboundTemplate encoding="base64">TVNIfF5+XCZ8U2VudGluZWx8Q2FyZGlvbG9neXxXSVNFfElQT0x8MjAxOTA1MDcyMzU3MDN8fE9S
TV5PMDFeT1JNX08wMXw5ZWVhMTUzMy0zMDNjLTQxOGYtODYxMS02OWMyNTMyODY3OGZ8UHwyLjMu
MXx8fEFMfHx8ODg1OS8xClBJRHx8fHgyMTI5MjkxNV5eXlNJTUF8fEZJQUxIT15BTkFeTUFSSUEg
TE9VUkVOQ08gUEVSRUlSQXx8MjAxNDEyMjd8Rnx8fF5eXl58fHx8fHx8fHx8fHx8fHx8fHx8ClBW
MXwxfHx8fHx8fF5NZWRpY28gU29saWNpdGFudGVefHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8
fHx8fHx8fHx8fHx8fHx8fApPUkN8Tld8fHx8QUdEfHx8fHx8fApPQlJ8MXx8fHx8fHx8fHx8fHx8
fHx8fHx8fHx8fHx8fHx8fHwKTlRFfHx8</outboundTemplate>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.8.0">
            <elements/>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.8.0">
            <elements/>
          </filter>
          <transportName>TCP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
        <connector version="3.8.0">
          <metaDataId>1</metaDataId>
          <name>ORU para Sectra</name>
          <properties class="com.mirth.connect.connectors.tcp.TcpDispatcherProperties" version="3.8.0">
            <pluginProperties/>
            <destinationConnectorProperties version="3.8.0">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>true</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <transmissionModeProperties class="com.mirth.connect.plugins.mllpmode.MLLPModeProperties">
              <pluginPointName>MLLP</pluginPointName>
              <startOfMessageBytes>0B</startOfMessageBytes>
              <endOfMessageBytes>1C0D</endOfMessageBytes>
              <useMLLPv2>false</useMLLPv2>
              <ackBytes>06</ackBytes>
              <nackBytes>15</nackBytes>
              <maxRetries>2</maxRetries>
            </transmissionModeProperties>
            <remoteAddress>127.0.0.1</remoteAddress>
            <remotePort>8888</remotePort>
            <overrideLocalBinding>false</overrideLocalBinding>
            <localAddress>0.0.0.0</localAddress>
            <localPort>0</localPort>
            <sendTimeout>5000</sendTimeout>
            <bufferSize>65536</bufferSize>
            <keepConnectionOpen>false</keepConnectionOpen>
            <checkRemoteHost>false</checkRemoteHost>
            <responseTimeout>5000</responseTimeout>
            <ignoreResponse>false</ignoreResponse>
            <queueOnResponseTimeout>true</queueOnResponseTimeout>
            <dataTypeBinary>false</dataTypeBinary>
            <charsetEncoding>DEFAULT_ENCODING</charsetEncoding>
            <template>${message.encodedData}</template>
          </properties>
          <transformer version="3.8.0">
            <elements>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>OBR32</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;OBR&apos;][&apos;OBR.32&apos;]</messageSegment>
                <mapping>&quot;&amp;&quot; + msg[&apos;OBR&apos;][&apos;OBR.32&apos;][&apos;OBR.32.1&apos;].toString() + &quot;&amp;&quot; + msg[&apos;OBR&apos;][&apos;OBR.32&apos;][&apos;OBR.32.2&apos;].toString()</mapping>
                <defaultValue>&quot;&quot;</defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>OBR2.1</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;OBR&apos;][&apos;OBR.2&apos;][&apos;OBR.2.1&apos;]</messageSegment>
                <mapping>&quot;ECG&quot; + msg[&apos;OBR&apos;][&apos;OBR.2&apos;][&apos;OBR.2.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>OBR18</name>
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;OBR&apos;][&apos;OBR.18&apos;][&apos;OBR.18.1&apos;]</messageSegment>
                <mapping>&quot;ECG&quot; + msg[&apos;OBR&apos;][&apos;OBR.18&apos;][&apos;OBR.18.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
            </elements>
            <inboundTemplate encoding="base64"></inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.8.0">
            <elements/>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.8.0">
            <elements/>
          </filter>
          <transportName>TCP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
        <connector version="3.8.0">
          <metaDataId>5</metaDataId>
          <name>ORU para Sonho</name>
          <properties class="com.mirth.connect.connectors.tcp.TcpDispatcherProperties" version="3.8.0">
            <pluginProperties/>
            <destinationConnectorProperties version="3.8.0">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>true</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <transmissionModeProperties class="com.mirth.connect.plugins.mllpmode.MLLPModeProperties">
              <pluginPointName>MLLP</pluginPointName>
              <startOfMessageBytes>0B</startOfMessageBytes>
              <endOfMessageBytes>1C0D</endOfMessageBytes>
              <useMLLPv2>false</useMLLPv2>
              <ackBytes>06</ackBytes>
              <nackBytes>15</nackBytes>
              <maxRetries>2</maxRetries>
            </transmissionModeProperties>
            <remoteAddress>127.0.0.1</remoteAddress>
            <remotePort>8888</remotePort>
            <overrideLocalBinding>false</overrideLocalBinding>
            <localAddress>0.0.0.0</localAddress>
            <localPort>0</localPort>
            <sendTimeout>5000</sendTimeout>
            <bufferSize>65536</bufferSize>
            <keepConnectionOpen>false</keepConnectionOpen>
            <checkRemoteHost>false</checkRemoteHost>
            <responseTimeout>5000</responseTimeout>
            <ignoreResponse>false</ignoreResponse>
            <queueOnResponseTimeout>true</queueOnResponseTimeout>
            <dataTypeBinary>false</dataTypeBinary>
            <charsetEncoding>DEFAULT_ENCODING</charsetEncoding>
            <template>${message.encodedData}</template>
          </properties>
          <transformer version="3.8.0">
            <elements>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>MSH12.1</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;MSH&apos;][&apos;MSH.12&apos;][&apos;MSH.12.1&apos;]</messageSegment>
                <mapping>&quot;2.5&quot;</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>ORC2.1</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;ORC&apos;][&apos;ORC.2&apos;][&apos;ORC.2.1&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.2&apos;][&apos;OBR.2.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>ORC2.2</name>
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;ORC&apos;][&apos;ORC.2&apos;][&apos;ORC.2.2&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.2&apos;][&apos;OBR.2.2&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>ORC5</name>
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;ORC&apos;][&apos;ORC.5&apos;]</messageSegment>
                <mapping>&quot;CM&quot;</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>OBR2.1</name>
                <sequenceNumber>4</sequenceNumber>
                <enabled>false</enabled>
                <messageSegment>msg[&apos;OBR&apos;][&apos;OBR.2&apos;][&apos;OBR.2.1&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.2&apos;][&apos;OBR.2.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>OBR18</name>
                <sequenceNumber>5</sequenceNumber>
                <enabled>false</enabled>
                <messageSegment>msg[&apos;OBR&apos;][&apos;OBR.18&apos;][&apos;OBR.18.1&apos;]</messageSegment>
                <mapping>msg[&apos;OBR&apos;][&apos;OBR.18&apos;][&apos;OBR.18.1&apos;].toString()</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>OBR32</name>
                <sequenceNumber>6</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;OBR&apos;][&apos;OBR.32&apos;]</messageSegment>
                <mapping>&quot;&amp;&quot; + msg[&apos;OBR&apos;][&apos;OBR.32&apos;][&apos;OBR.32.1&apos;].toString() + &quot;&amp;&quot; + msg[&apos;OBR&apos;][&apos;OBR.32&apos;][&apos;OBR.32.2&apos;].toString()</mapping>
                <defaultValue>&quot;&quot;</defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>TQ1.1</name>
                <sequenceNumber>7</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;TQ1&apos;][&apos;TQ1.1&apos;][&apos;TQ1.1.1&apos;]</messageSegment>
                <mapping>&quot;1&quot;</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>TQ1.2.1</name>
                <sequenceNumber>8</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;TQ1&apos;][&apos;TQ1.2&apos;][&apos;TQ1.2.1&apos;]</messageSegment>
                <mapping>&quot;1&quot;</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>TQ1.2.2</name>
                <sequenceNumber>9</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;TQ1&apos;][&apos;TQ1.2&apos;][&apos;TQ1.2.2&apos;]</messageSegment>
                <mapping>&quot;Un&quot;</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>PV1.19.4</name>
                <sequenceNumber>10</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;PV1&apos;][&apos;PV1.19&apos;][&apos;PV1.19.4&apos;]</messageSegment>
                <mapping>msg[&apos;PV1&apos;][&apos;PV1.19&apos;][&apos;PV1.19.2&apos;]</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.messagebuilder.MessageBuilderStep version="3.8.0">
                <name>PV1.19.2</name>
                <sequenceNumber>11</sequenceNumber>
                <enabled>true</enabled>
                <messageSegment>msg[&apos;PV1&apos;][&apos;PV1.19&apos;][&apos;PV1.19.2&apos;]</messageSegment>
                <mapping>&quot;&quot;</mapping>
                <defaultValue></defaultValue>
                <replacements/>
              </com.mirth.connect.plugins.messagebuilder.MessageBuilderStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.8.0">
                <name>SWAP PID.3 com PID.4</name>
                <sequenceNumber>12</sequenceNumber>
                <enabled>true</enabled>
                <script>//TROCA PID.3 COM PID.4

msg.PID[&apos;PID.3&apos;] = [renameField(msg.PID[&apos;PID.4&apos;],&apos;PID.3&apos;), msg.PID[&apos;PID.4&apos;] = renameField(msg.PID[&apos;PID.3&apos;],&apos;PID.4&apos;)][0];


function renameField(oldField,name) {
	String.prototype.entityReplace = function() {return this.replace(/&amp;/g,&apos;&amp;amp;&apos;).replace(/&quot;/g,&apos;&amp;quot;&apos;).replace(/&apos;/g,&apos;&amp;apos;&apos;).replace(/&lt;/g,&apos;&amp;lt;&apos;).replace(/&gt;/g,&apos;&amp;gt;&apos;);};
	var out = new XML();
	for each (field in oldField) {
		var outField = new XML(&apos;&lt;&apos;+name+&apos;/&gt;&apos;);
		for each (component in field.children()) {
			var cname = name + component.name().toString().substring(component.name().toString().indexOf(&apos;.&apos;,component.name().toString().indexOf(&apos;.&apos;)+1));
			if (component.children().length() &gt; 1) {
				// Has subcomponents
				var outComponent = new XML(&apos;&lt;&apos;+cname+&apos;/&gt;&apos;);
				for each (subcomponent in component.children()) {
					var scname = name + subcomponent.name().toString().substring(subcomponent.name().toString().indexOf(&apos;.&apos;,subcomponent.name().toString().indexOf(&apos;.&apos;)+1));
					var outSubcomponent = new XML(&apos;&lt;&apos;+scname+&apos;&gt;&apos;+subcomponent.toString().entityReplace()+&apos;&lt;/&apos;+scname+&apos;&gt;&apos;);
					outComponent.scname = outSubcomponent;
				}
				outField.cname = outComponent;
			}
			else
				outField.cname = new XML(&apos;&lt;&apos;+cname+&apos;&gt;&apos;+component.toString().entityReplace()+&apos;&lt;/&apos;+cname+&apos;&gt;&apos;);
		}
		out += outField;
	}
	return out;
}</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.8.0">
                <name>Apaga ZEI</name>
                <sequenceNumber>13</sequenceNumber>
                <enabled>true</enabled>
                <script>// delete only the pid 3.3 node of the message
//delete [&apos;PID&apos;][&apos;PID.3&apos;][&apos;PID.3.3&apos;];
//an entire segment may be removed by specifing the parent node of the segment
delete msg.ZEI</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64"></inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.8.0">
            <elements/>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.8.0">
            <elements/>
          </filter>
          <transportName>TCP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
        <connector version="3.8.0">
          <metaDataId>7</metaDataId>
          <name>DICOM para Sectra</name>
          <properties class="com.mirth.connect.connectors.file.FileDispatcherProperties" version="3.8.0">
            <pluginProperties/>
            <destinationConnectorProperties version="3.8.0">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <scheme>FILE</scheme>
            <host>/DMR/SENTINEL/DICOM/MODIFICADOS</host>
            <outputPattern>${UUID}.dcm</outputPattern>
            <anonymous>true</anonymous>
            <username>anonymous</username>
            <password>anonymous</password>
            <timeout>10000</timeout>
            <keepConnectionOpen>true</keepConnectionOpen>
            <maxIdleTime>0</maxIdleTime>
            <secure>true</secure>
            <passive>true</passive>
            <validateConnection>true</validateConnection>
            <outputAppend>true</outputAppend>
            <errorOnExists>false</errorOnExists>
            <temporary>false</temporary>
            <binary>false</binary>
            <charsetEncoding>DEFAULT_ENCODING</charsetEncoding>
            <template>${DICOMMESSAGE}</template>
          </properties>
          <transformer version="3.8.0">
            <elements>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.8.0">
                <name>teste</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>false</enabled>
                <script>importPackage(Packages.org.dcm4che2.data);

// prerequisite: have a skeleton with all the static DICOM parts stored in the outbound message template &apos;tmp&apos;

// convert template to a dcm4che DicomObject
var dicomBytes = FileUtil.decode(SerializerFactory.getSerializer(&apos;DICOM&apos;).fromXML(tmp));
var dcmObject = DICOMUtil.byteArrayToDicomObject(dicomBytes, false);

// miscellaneous setup
var random = new java.util.Random();
var now = new java.util.Date();

//  UID prefixes
var UID_PREFIX = &quot;9.8.7.6.5.&quot;; // get your own unique UID root to use here
var STUDY_SUB = &quot;1.&quot;;
var SERIES_SUB = &quot;2.&quot;;
var INSTANCE_SUB = &quot;3.&quot;;

// create SOP instance UID for the new object and insert it into the object
var instanceUID = UID_PREFIX + INSTANCE_SUB + DateUtil.formatDate(&quot;yyyyMMddHHmmssSSS&quot;, new java.util.Date()) + &quot;.&quot; + random.nextInt(100000);


dcmObject.putString(Tag.MediaStorageSOPInstanceUID, VR.UI, instanceUID);
dcmObject.putString(Tag.SOPInstanceUID, VR.UI, instanceUID);

// object creation date &amp; time
dcmObject.putDate(Tag.InstanceCreationDate, VR.DA, now);
dcmObject.putDate(Tag.InstanceCreationTime, VR.TM, now);

// extract values for study date and time from the incoming HL7 message
studyDateString = msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().substring(0, 8);
studyTimeString = msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().substring(8, 14);

dcmObject.putString(Tag.StudyDate, VR.DA, studyDateString);
dcmObject.putString(Tag.StudyTime, VR.TM, studyTimeString);

// accession number from incoming HL7
dcmObject.putString(Tag.AccessionNumber, VR.SH, msg[&apos;OBR&apos;][&apos;OBR.2&apos;][&apos;OBR.2.1&apos;].toString());


// patient demographics from HL7
dcmObject.putString(Tag.PatientName, VR.PN, msg[&apos;PID&apos;][&apos;PID.5&apos;][&apos;PID.5.1&apos;].toString() + &quot;^&quot; + msg[&apos;PID&apos;][&apos;PID.5&apos;][&apos;PID.5.2&apos;].toString());
dcmObject.putString(Tag.PatientID, VR.LO, msg[&apos;PID&apos;][&apos;PID.3&apos;][&apos;PID.3.1&apos;].toString());
dcmObject.putString(Tag.PatientBirthDate, VR.DA, msg[&apos;PID&apos;][&apos;PID.7&apos;][&apos;PID.7.1&apos;].toString().substring(0, 8));
dcmObject.putString(Tag.PatientSex, VR.CS, msg[&apos;PID&apos;][&apos;PID.8&apos;][&apos;PID.8.1&apos;].toString());

// use previously found StudyUID to link new object to existing study on PACS
dcmObject.putString(Tag.StudyInstanceUID, VR.UI, $(&apos;studyUID&apos;));

// create and insert series UID
var seriesInstanceUID = UID_PREFIX + SERIES_SUB + DateUtil.formatDate(&quot;yyyyMMddHHmmssSSS&quot;, new java.util.Date()) + &quot;.&quot; + random.nextInt(100000);
dcmObject.putString(Tag.SeriesInstanceUID, VR.UI, seriesInstanceUID);

dcmObject.putInt(Tag.SeriesNumber, VR.IS, 99);

dcmObject.putString(Tag.SeriesDescription, VR.LO, &quot;Protokoll &quot; + DateUtil.convertDate(&quot;yyyyMMddHHmmss&quot;, &quot;dd.MM.yyyy HH:mm&quot;, msg[&apos;OBR&apos;][&apos;OBR.22&apos;][&apos;OBR.22.1&apos;].toString()));


// the PDF has been previously stored as an attachment to the message
// now we retrieve the attachment and put it&apos;s contents into the EncapsulatedDocument field of DICOM object
var attachmentList = getAttachments();
if(attachmentList.size() != 1) {
	throw &quot;Attachment count not exactly 1&quot;;
}

var attachment = attachmentList.get(0);
if(attachment.getId().equals($(&apos;attachmentId&apos;))) {
	dcmObject.putBytes(Tag.EncapsulatedDocument, VR.OB, FileUtil.decode(new java.lang.String(attachment.getContent())));
} else {
	throw &quot;Attachment ID &quot; + attachment.getId() + &quot; does not match expected ID &quot; + $(&apos;attachmentId&apos;);
}


// convert the final dcm4che DicomObject back to Mirth XML representation and store it in tmp for further processing and sending
tmp = SerializerFactory.getSerializer(&apos;DICOM&apos;).toXML( FileUtil.encode(DICOMUtil.dicomObjectToByteArray(dcmObject)));</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">TVNIfF5+XCZ8U2VudGluZWx8Q2FyZGlvbG9neXxXSVNFfElQT0x8MjAxOTA4MDIwODI0MzB8fE9S
VV5SMDF8MTkwODAyMDgyNDMwMDAwMDAzfFB8Mi4zLjF8fHx8QUx8fHw4ODU5MS8xClBJRHx8fDEw
NDYyMTVeXl5JUE9MfHxBTEJJTk8gTUFSVElOUyBGRVJSRUlSQSBBTENBUklBXkFOQV5SSVRBfHwx
OTY0MTAwOHxGfHx8UlVBIERFIENBQk8gVkVSREUgTiAgMjcgLUEgLSA1ICBFXl5TRVRcWERBXEJB
TF5eMjkwMC0wNzJeUFR8fDI2NTQwMDQ0OFxSXHx8fHx8MTI1MjA1MwpQVjF8MXxDT058fHx8fDUy
NTY0XkNBU1RST15NQUZBTERBfHx8fHx8fHx8fHx8MTI0NjEzMjZeU09OSE98fHx8fHx8fHx8fHx8
fHx8fHx8fHx8fHx8MjAxOTA2MjQxMjIwMDAKT1JDfFNDfGFiZmIyYTZjLTE3ODUtNGRlNy1hMmM5
LWVkZTk5MjE5MDg4OHwxNTc1NjE2Nl5TT05IT3x8Rnx8fHx8fHw1MjU2NF5DQVNUUk9eTUFGQUxE
QQpPQlJ8MXxFQ0cyOTAyNDY2XlNDSEVEVUxJTkd8MTU3NTYxNjZeU09OSE98NDAzMDFeRUNHIFNJ
TVBMRVMgREUgMTIgREVSSVZBXFhDN1xcWEQ1XEVTfHx8MjAxOTA4MDIwODI0MDB8fHx8fHx8fHw1
MjU2NF5DQVNUUk9eTUFGQUxEQXx8RUNHMjkwMjQ2Nl5TQ0hFRFVMSU5HfDQwMzAxfHxDQVJEX1Nl
bnRpbmVsfDIwMTkwODAyMDgyNDA3fHx8Rnx8fHx8fHxeU3BhY2VtZWRpY2FsXkFUSApUUTF8fHx8
fHx8MjAxOTA4MDIwODI0MDAKT0JYfHxUWHx8fFJlbGF0XFhGM1xyaW8gZGlzcG9uw612ZWwgY29t
byBpbWFnZW0gZG8gZXhhbWV8fHx8fHxGClpFSXw0MDMwMQ==</inboundTemplate>
            <outboundTemplate encoding="base64">PGRpY29tPgogICAgPHRhZzAwMDIwMDAwIGxlbj0iNCIgdGFnPSIwMDAyMDAwMCIgdnI9IlVMIj4x
OTA8L3RhZzAwMDIwMDAwPgogICAgPHRhZzAwMDIwMDAxIGxlbj0iMiIgdGFnPSIwMDAyMDAwMSIg
dnI9Ik9CIj4wMFwwMTwvdGFnMDAwMjAwMDE+CiAgICA8dGFnMDAwMjAwMDIgbGVuPSIzMCIgdGFn
PSIwMDAyMDAwMiIgdnI9IlVJIj4xLjIuODQwLjEwMDA4LjUuMS40LjEuMS4xMDQuMTwvdGFnMDAw
MjAwMDI+CiAgICA8dGFnMDAwMjAwMDMgbGVuPSI1NCIgdGFnPSIwMDAyMDAwMyIgdnI9IlVJIj4x
LjMuNi4xLjQuMS4yNTQwMy4xMDk3NTM3Mjk0MjQyLjE0MTg0LjIwMTkxMDE1MDY0MzA0LjE8L3Rh
ZzAwMDIwMDAzPgogICAgPHRhZzAwMDIwMDEwIGxlbj0iMTgiIHRhZz0iMDAwMjAwMTAiIHZyPSJV
SSI+MS4yLjg0MC4xMDAwOC4xLjI8L3RhZzAwMDIwMDEwPgogICAgPHRhZzAwMDIwMDEyIGxlbj0i
MjQiIHRhZz0iMDAwMjAwMTIiIHZyPSJVSSI+MS4zLjYuMS40LjEuMjU0MDMuMS4xLjE8L3RhZzAw
MDIwMDEyPgogICAgPHRhZzAwMDIwMDEzIGxlbj0iMTAiIHRhZz0iMDAwMjAwMTMiIHZyPSJTSCI+
RGljb20gMC4xPC90YWcwMDAyMDAxMz4KICAgIDx0YWcwMDA4MDAwNSBsZW49IjEwIiB0YWc9IjAw
MDgwMDA1IiB2cj0iQ1MiPklTT19JUiAxOTI8L3RhZzAwMDgwMDA1PgogICAgPHRhZzAwMDgwMDE2
IGxlbj0iMzAiIHRhZz0iMDAwODAwMTYiIHZyPSJVSSI+MS4yLjg0MC4xMDAwOC41LjEuNC4xLjEu
MTA0LjE8L3RhZzAwMDgwMDE2PgogICAgPHRhZzAwMDgwMDE4IGxlbj0iNTQiIHRhZz0iMDAwODAw
MTgiIHZyPSJVSSI+MS4zLjYuMS40LjEuMjU0MDMuMTA5NzUzNzI5NDI0Mi4xNDE4NC4yMDE5MTAx
NTA2NDMwNC4xPC90YWcwMDA4MDAxOD4KICAgIDx0YWcwMDA4MDAyMCBsZW49IjgiIHRhZz0iMDAw
ODAwMjAiIHZyPSJEQSI+MjAxOTA4Mjg8L3RhZzAwMDgwMDIwPgogICAgPHRhZzAwMDgwMDIxIGxl
bj0iOCIgdGFnPSIwMDA4MDAyMSIgdnI9IkRBIj4yMDE5MTAxNTwvdGFnMDAwODAwMjE+CiAgICA8
dGFnMDAwODAwMjIgbGVuPSI4IiB0YWc9IjAwMDgwMDIyIiB2cj0iREEiPjIwMTkwODI4PC90YWcw
MDA4MDAyMj4KICAgIDx0YWcwMDA4MDAyMyBsZW49IjgiIHRhZz0iMDAwODAwMjMiIHZyPSJEQSI+
MjAxOTA4Mjg8L3RhZzAwMDgwMDIzPgogICAgPHRhZzAwMDgwMDJBIGxlbj0iMjIiIHRhZz0iMDAw
ODAwMkEiIHZyPSJEVCI+MjAxOTA4MjgxMDA0MDAuMDAwMDAwPC90YWcwMDA4MDAyQT4KICAgIDx0
YWcwMDA4MDAzMCBsZW49IjYiIHRhZz0iMDAwODAwMzAiIHZyPSJUTSI+PC90YWcwMDA4MDAzMD4K
ICAgIDx0YWcwMDA4MDAzMSBsZW49IjYiIHRhZz0iMDAwODAwMzEiIHZyPSJUTSI+PC90YWcwMDA4
MDAzMT4KICAgIDx0YWcwMDA4MDAzMyBsZW49IjYiIHRhZz0iMDAwODAwMzMiIHZyPSJUTSI+PC90
YWcwMDA4MDAzMz4KICAgIDx0YWcwMDA4MDA1MCBsZW49IjE2IiB0YWc9IjAwMDgwMDUwIiB2cj0i
U0giPjwvdGFnMDAwODAwNTA+CiAgICA8dGFnMDAwODAwNjAgbGVuPSIyIiB0YWc9IjAwMDgwMDYw
IiB2cj0iQ1MiPk9UPC90YWcwMDA4MDA2MD4KICAgIDx0YWcwMDA4MDA2NCBsZW49IjQiIHRhZz0i
MDAwODAwNjQiIHZyPSJDUyI+V1NEPC90YWcwMDA4MDA2ND4KICAgIDx0YWcwMDA4MDA3MCBsZW49
IjIwIiB0YWc9IjAwMDgwMDcwIiB2cj0iTE8iPlNwYWNlbGFicyBIZWFsdGhjYXJlPC90YWcwMDA4
MDA3MD4KICAgIDx0YWcwMDA4MDA4MCBsZW49IjAiIHRhZz0iMDAwODAwODAiIHZyPSJMTyIvPgog
ICAgPHRhZzAwMDgwMDkwIGxlbj0iMCIgdGFnPSIwMDA4MDA5MCIgdnI9IlBOIi8+CiAgICA8dGFn
MDAwODEwMTAgbGVuPSI4IiB0YWc9IjAwMDgxMDEwIiB2cj0iU0giPlNFTlRJTkVMPC90YWcwMDA4
MTAxMD4KICAgIDx0YWcwMDA4MTAzMCBsZW49IjAiIHRhZz0iMDAwODEwMzAiIHZyPSJMTyIvPgog
ICAgPHRhZzAwMDgxMDNFIGxlbj0iMCIgdGFnPSIwMDA4MTAzRSIgdnI9IkxPIi8+CiAgICA8dGFn
MDAwODEwNDAgbGVuPSIwIiB0YWc9IjAwMDgxMDQwIiB2cj0iTE8iLz4KICAgIDx0YWcwMDA4MTA0
OCBsZW49IjAiIHRhZz0iMDAwODEwNDgiIHZyPSJQTiIvPgogICAgPHRhZzAwMDgxMDUwIGxlbj0i
MCIgdGFnPSIwMDA4MTA1MCIgdnI9IlBOIi8+CiAgICA8dGFnMDAwODEwNjAgbGVuPSIwIiB0YWc9
IjAwMDgxMDYwIiB2cj0iUE4iLz4KICAgIDx0YWcwMDEwMDAxMCBsZW49IjE2IiB0YWc9IjAwMTAw
MDEwIiB2cj0iUE4iPjAwMDZeMDAwNl5eXjAwMDY8L3RhZzAwMTAwMDEwPgogICAgPHRhZzAwMTAw
MDIwIGxlbj0iNiIgdGFnPSIwMDEwMDAyMCIgdnI9IkxPIj43Mzk0OTE8L3RhZzAwMTAwMDIwPgog
ICAgPHRhZzAwMTAwMDMwIGxlbj0iOCIgdGFnPSIwMDEwMDAzMCIgdnI9IkRBIj4xOTgwMDIyMjwv
dGFnMDAxMDAwMzA+CiAgICA8dGFnMDAxMDAwNDAgbGVuPSIyIiB0YWc9IjAwMTAwMDQwIiB2cj0i
Q1MiPk08L3RhZzAwMTAwMDQwPgogICAgPHRhZzAwMTAxMDAwIGxlbj0iMCIgdGFnPSIwMDEwMTAw
MCIgdnI9IkxPIi8+CiAgICA8dGFnMDAxMDEwMjAgbGVuPSIwIiB0YWc9IjAwMTAxMDIwIiB2cj0i
RFMiLz4KICAgIDx0YWcwMDEwMTAzMCBsZW49IjAiIHRhZz0iMDAxMDEwMzAiIHZyPSJEUyIvPgog
ICAgPHRhZzAwMTAyMTYwIGxlbj0iMCIgdGFnPSIwMDEwMjE2MCIgdnI9IlNIIi8+CiAgICA8dGFn
MDAxMDQwMDAgbGVuPSIwIiB0YWc9IjAwMTA0MDAwIiB2cj0iTFQiLz4KICAgIDx0YWcwMDIwMDAw
RCBsZW49IjU0IiB0YWc9IjAwMjAwMDBEIiB2cj0iVUkiPjEuMy42LjEuNC4xLjI1NDAzLjEwOTc1
MzcyOTQyNDIuMTQxODQuMjAxOTEwMTUwNDI0MTQuMjwvdGFnMDAyMDAwMEQ+CiAgICA8dGFnMDAy
MDAwMEUgbGVuPSI1NCIgdGFnPSIwMDIwMDAwRSIgdnI9IlVJIj4xLjMuNi4xLjQuMS4yNTQwMy4x
MDk3NTM3Mjk0MjQyLjE0MTg0LjIwMTkxMDE1MDQyNDE0LjM8L3RhZzAwMjAwMDBFPgogICAgPHRh
ZzAwMjAwMDEwIGxlbj0iMCIgdGFnPSIwMDIwMDAxMCIgdnI9IlNIIi8+CiAgICA8dGFnMDAyMDAw
MTEgbGVuPSIyIiB0YWc9IjAwMjAwMDExIiB2cj0iSVMiPjwvdGFnMDAyMDAwMTE+CiAgICA8dGFn
MDAyMDAwMTMgbGVuPSIyIiB0YWc9IjAwMjAwMDEzIiB2cj0iSVMiPjwvdGFnMDAyMDAwMTM+CiAg
ICA8dGFnMDAyMDEyMDkgbGVuPSIyIiB0YWc9IjAwMjAxMjA5IiB2cj0iSVMiPjwvdGFnMDAyMDEy
MDk+CiAgICA8dGFnMDAyODAzMDEgbGVuPSI0IiB0YWc9IjAwMjgwMzAxIiB2cj0iQ1MiPjwvdGFn
MDAyODAzMDE+CiAgICA8dGFnMDAzODAwMTAgbGVuPSIwIiB0YWc9IjAwMzgwMDEwIiB2cj0iTE8i
Lz4KICAgIDx0YWcwMDQyMDAxMCBsZW49IjAiIHRhZz0iMDA0MjAwMTAiIHZyPSJTVCIvPgogICAg
PHRhZzAwNDIwMDExIGxlbj0iMTY4OTMwOCIgdGFnPSIwMDQyMDAxMSIgdnI9Ik9CIj48L3RhZzAw
NDIwMDExPgogICAgPHRhZzAwNDIwMDEyIGxlbj0iMTYiIHRhZz0iMDA0MjAwMTIiIHZyPSJMTyI+
YXBwbGljYXRpb24vcGRmPC90YWcwMDQyMDAxMj4KPC9kaWNvbT4KICAgIA==</outboundTemplate>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>DICOM</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.dicom.DICOMDataTypeProperties" version="3.8.0"/>
          </transformer>
          <responseTransformer version="3.8.0">
            <elements/>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.8.0">
            <elements/>
          </filter>
          <transportName>File Writer</transportName>
          <mode>DESTINATION</mode>
          <enabled>false</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
        <connector version="3.8.0">
          <metaDataId>8</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.file.FileDispatcherProperties" version="3.8.0">
            <pluginProperties/>
            <destinationConnectorProperties version="3.8.0">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <scheme>FILE</scheme>
            <host>/DMR/SENTINEL/DICOM/MODIFICADOS/canal novo</host>
            <outputPattern>${UUID}.dcm</outputPattern>
            <anonymous>true</anonymous>
            <username>anonymous</username>
            <password>anonymous</password>
            <timeout>10000</timeout>
            <keepConnectionOpen>true</keepConnectionOpen>
            <maxIdleTime>0</maxIdleTime>
            <secure>true</secure>
            <passive>true</passive>
            <validateConnection>true</validateConnection>
            <outputAppend>false</outputAppend>
            <errorOnExists>false</errorOnExists>
            <temporary>false</temporary>
            <binary>true</binary>
            <charsetEncoding>DEFAULT_ENCODING</charsetEncoding>
            <template>${message.encodedData}</template>
          </properties>
          <transformer version="3.8.0">
            <elements>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.8.0">
                <name>Mapeamento</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <script>var StudyUID = (org.dcm4che2.util.UIDUtils.createUID());
channelMap.put(&apos;StudyUID&apos;,StudyUID);

var SeriesUID = (org.dcm4che2.util.UIDUtils.createUID());
channelMap.put(&apos;SeriesUID&apos;,SeriesUID);

var SOPInstanceUID = (org.dcm4che2.util.UIDUtils.createUID()); 
channelMap.put(&apos;SOPInstanceUID&apos;,SOPInstanceUID);

//ALTERAÇÃO DA TAG 00100010 
var s1 = msg[&apos;PID&apos;][&apos;PID.5&apos;][&apos;PID.5.1&apos;].toString() + &quot;^&quot; + msg[&apos;PID&apos;][&apos;PID.5&apos;][&apos;PID.5.2&apos;].toString();
tmp[&apos;tag00100010&apos;] = s1.toString();
tmp[&apos;tag00100010&apos;][&apos;@len&apos;] = s1.toString().length;
tmp[&apos;tag00100010&apos;][&apos;@tag&apos;] = &quot;00100010&quot;;
tmp[&apos;tag00100010&apos;][&apos;@vr&apos;] = &quot;SH&quot;;

//ALTERAÇÃO DA TAG 00100020 
tmp[&apos;tag00100020&apos;] = msg[&apos;PID&apos;][&apos;PID.3&apos;][&apos;PID.3.1&apos;].toString()
tmp[&apos;tag00100020&apos;][&apos;@len&apos;] = msg[&apos;PID&apos;][&apos;PID.3&apos;][&apos;PID.3.1&apos;].toString().length;
tmp[&apos;tag00100020&apos;][&apos;@tag&apos;] = &quot;00100020&quot;;
tmp[&apos;tag00100020&apos;][&apos;@vr&apos;] = &quot;LO&quot;;

//ALTERAÇÃO DA TAG 00100030 
tmp[&apos;tag00100030&apos;] = msg[&apos;PID&apos;][&apos;PID.7&apos;][&apos;PID.7.1&apos;].toString()
tmp[&apos;tag00100030&apos;][&apos;@len&apos;] = msg[&apos;PID&apos;][&apos;PID.7&apos;][&apos;PID.7.1&apos;].toString().length;
tmp[&apos;tag00100030&apos;][&apos;@tag&apos;] = &quot;00100030&quot;;
tmp[&apos;tag00100030&apos;][&apos;@vr&apos;] = &quot;DA&quot;;

//ALTERAÇÃO DA TAG 00100040 
tmp[&apos;tag00100040&apos;] = msg[&apos;PID&apos;][&apos;PID.8&apos;][&apos;PID.8.1&apos;].toString()
tmp[&apos;tag00100040&apos;][&apos;@len&apos;] = msg[&apos;PID&apos;][&apos;PID.8&apos;][&apos;PID.8.1&apos;].toString().length;
tmp[&apos;tag00100040&apos;][&apos;@tag&apos;] = &quot;00100040&quot;;
tmp[&apos;tag00100040&apos;][&apos;@vr&apos;] = &quot;CS&quot;;

//ALTERAÇÃO DA TAG 0020000D 
tmp[&apos;tag0020000D&apos;] = $(&apos;StudyUID&apos;)
tmp[&apos;tag0020000D&apos;][&apos;@len&apos;] = &quot;54&quot;;
tmp[&apos;tag0020000D&apos;][&apos;@tag&apos;] = &quot;0020000D&quot;;
tmp[&apos;tag0020000D&apos;][&apos;@vr&apos;] = &quot;UI&quot;;

//ALTERAÇÃO DA TAG 00080020 
tmp[&apos;tag00080020&apos;] = msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().substring(0, 7)
tmp[&apos;tag00080020&apos;][&apos;@len&apos;] = msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().substring(0, 7).length;
tmp[&apos;tag00080020&apos;][&apos;@tag&apos;] = &quot;00080020&quot;;
tmp[&apos;tag00080020&apos;][&apos;@vr&apos;] = &quot;DA&quot;;

//ALTERAÇÃO DA TAG 00080030 --- Para rever e separar a data da hora
tmp[&apos;tag00080030&apos;] = msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().substring(8, 14)
tmp[&apos;tag00080030&apos;][&apos;@len&apos;] = msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().substring(8, 14).length;
tmp[&apos;tag00080030&apos;][&apos;@tag&apos;] = &quot;00080030&quot;;
tmp[&apos;tag00080030&apos;][&apos;@vr&apos;] = &quot;TM&quot;;

//ALTERAÇÃO DA TAG 00080090 
var s1 = msg[&apos;OBR&apos;][&apos;OBR.16&apos;][&apos;OBR.16.1&apos;].toString() + &quot;^&quot; + msg[&apos;OBR&apos;][&apos;OBR.16&apos;][&apos;OBR.16.2&apos;].toString() + &quot;^&quot; + msg[&apos;OBR&apos;][&apos;OBR.16&apos;][&apos;OBR.16.3&apos;].toString()
tmp[&apos;tag00080090&apos;] = s1.toString();
tmp[&apos;tag00080090&apos;][&apos;@len&apos;] = s1.toString().length;
tmp[&apos;tag00080090&apos;][&apos;@tag&apos;] = &quot;00080090&quot;;
tmp[&apos;tag00080090&apos;][&apos;@vr&apos;] = &quot;PN&quot;;

//ALTERAÇÃO DA TAG 00200010 
tmp[&apos;tag00200010&apos;] = $(&apos;SeriesUID&apos;)
tmp[&apos;tag00200010&apos;][&apos;@len&apos;] = &quot;54&quot;;
tmp[&apos;tag00200010&apos;][&apos;@tag&apos;] = &quot;00200010&quot;;
tmp[&apos;tag00200010&apos;][&apos;@vr&apos;] = &quot;SH&quot;;

//ALTERAÇÃO DA TAG 00080050
var s1 = &quot;ECG&quot;+ msg[&apos;OBR&apos;][&apos;OBR.18&apos;][&apos;OBR.18.1&apos;].toString() 
tmp[&apos;tag00080050&apos;] = s1.toString();
tmp[&apos;tag00080050&apos;][&apos;@len&apos;] = s1.toString().length;
tmp[&apos;tag00080050&apos;][&apos;@tag&apos;] = &quot;00080050&quot;;
tmp[&apos;tag00080050&apos;][&apos;@vr&apos;] = &quot;SH&quot;;

//ALTERAÇÃO DA TAG 00080023 
tmp[&apos;tag00080023&apos;] = msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().substring(0, 7);
tmp[&apos;tag00080023&apos;][&apos;@len&apos;] =msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().substring(0, 7).length;
tmp[&apos;tag00080023&apos;][&apos;@tag&apos;] = &quot;00080023&quot;;
tmp[&apos;tag00080023&apos;][&apos;@vr&apos;] = &quot;DA&quot;;

//ALTERAÇÃO DA TAG 00080033 --- Para rever e separar a data da hora
tmp[&apos;tag00080033&apos;] = msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().substring(8, 14)
tmp[&apos;tag00080033&apos;][&apos;@len&apos;] = msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().substring(8, 14).length;
tmp[&apos;tag00080033&apos;][&apos;@tag&apos;] = &quot;00080033&quot;;
tmp[&apos;tag00080033&apos;][&apos;@vr&apos;] = &quot;TM&quot;;

//ALTERAÇÃO DA TAG 0008002A
tmp[&apos;tag0008002A&apos;] = msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString()
tmp[&apos;tag0008002A&apos;][&apos;@len&apos;] = msg[&apos;OBR&apos;][&apos;OBR.7&apos;][&apos;OBR.7.1&apos;].toString().length;
tmp[&apos;tag0008002A&apos;][&apos;@tag&apos;] = &quot;0008002A&quot;;
tmp[&apos;tag0008002A&apos;][&apos;@vr&apos;] = &quot;DT&quot;;

//Conversão de PDF para encpsulated report

var contents = FileUtil.readBytes($(&apos;nomeFicheiroPDF&apos;));
var encData = FileUtil.encode(contents); 

//remove the newlines to produce valid Base64
var index = encData.indexOf(&quot;\r\n&quot;);
    while(index != -1){
        encData = encData.replace(&quot;\r\n&quot;,&quot;&quot;);
        index = encData.indexOf(&quot;\r\n&quot;);
    }

//ALTERAÇÃO DA TAG 00420011
tmp[&apos;tag00420011&apos;] = encData;
tmp[&apos;tag00420011&apos;][&apos;@len&apos;] = &quot;16000&quot;
tmp[&apos;tag00420011&apos;][&apos;@tag&apos;] = &quot;00420011&quot;;
tmp[&apos;tag00420011&apos;][&apos;@vr&apos;] = &quot;OB&quot;;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">TVNIfF5+XCZ8U2VudGluZWx8Q2FyZGlvbG9neXxXSVNFfElQT0x8MjAxOTA4MDIwODI0MzB8fE9S
VV5SMDF8MTkwODAyMDgyNDMwMDAwMDAzfFB8Mi4zLjF8fHx8QUx8fHw4ODU5MS8xClBJRHx8fDEw
NDYyMTVeXl5JUE9MfHxBTEJJTk8gTUFSVElOUyBGRVJSRUlSQSBBTENBUklBXkFOQV5SSVRBfHwx
OTY0MTAwOHxGfHx8UlVBIERFIENBQk8gVkVSREUgTiAgMjcgLUEgLSA1ICBFXl5TRVRcWERBXEJB
TF5eMjkwMC0wNzJeUFR8fDI2NTQwMDQ0OFxSXHx8fHx8MTI1MjA1MwpQVjF8MXxDT058fHx8fDUy
NTY0XkNBU1RST15NQUZBTERBfHx8fHx8fHx8fHx8MTI0NjEzMjZeU09OSE98fHx8fHx8fHx8fHx8
fHx8fHx8fHx8fHx8MjAxOTA2MjQxMjIwMDAKT1JDfFNDfGFiZmIyYTZjLTE3ODUtNGRlNy1hMmM5
LWVkZTk5MjE5MDg4OHwxNTc1NjE2Nl5TT05IT3x8Rnx8fHx8fHw1MjU2NF5DQVNUUk9eTUFGQUxE
QQpPQlJ8MXxFQ0cyOTAyNDY2XlNDSEVEVUxJTkd8MTU3NTYxNjZeU09OSE98NDAzMDFeRUNHIFNJ
TVBMRVMgREUgMTIgREVSSVZBXFhDN1xcWEQ1XEVTfHx8MjAxOTA4MDIwODI0MDB8fHx8fHx8fHw1
MjU2NF5DQVNUUk9eTUFGQUxEQXx8RUNHMjkwMjQ2Nl5TQ0hFRFVMSU5HfDQwMzAxfHxDQVJEX1Nl
bnRpbmVsfDIwMTkwODAyMDgyNDA3fHx8Rnx8fHx8fHxeU3BhY2VtZWRpY2FsXkFUSApUUTF8fHx8
fHx8MjAxOTA4MDIwODI0MDAKT0JYfHxUWHx8fFJlbGF0XFhGM1xyaW8gZGlzcG9uw612ZWwgY29t
byBpbWFnZW0gZG8gZXhhbWV8fHx8fHxGClpFSXw0MDMwMQo=</inboundTemplate>
            <outboundTemplate encoding="base64">PGRpY29tPgogICAgPHRhZzAwMDIwMDAwIGxlbj0iNCIgdGFnPSIwMDAyMDAwMCIgdnI9IlVMIj4x
OTA8L3RhZzAwMDIwMDAwPgogICAgPHRhZzAwMDIwMDAxIGxlbj0iMiIgdGFnPSIwMDAyMDAwMSIg
dnI9Ik9CIj4wMFwwMTwvdGFnMDAwMjAwMDE+CiAgICA8dGFnMDAwMjAwMDIgbGVuPSIzMCIgdGFn
PSIwMDAyMDAwMiIgdnI9IlVJIj4xLjIuODQwLjEwMDA4LjUuMS40LjEuMS4xMDQuMTwvdGFnMDAw
MjAwMDI+CiAgICA8dGFnMDAwMjAwMDMgbGVuPSI1NCIgdGFnPSIwMDAyMDAwMyIgdnI9IlVJIj4x
LjMuNi4xLjQuMS4yNTQwMy45MjQyNzUyMzU1OTQ0OC45MjIwLjIwMTkxMDIyMDQyNDUyLjE8L3Rh
ZzAwMDIwMDAzPgogICAgPHRhZzAwMDIwMDEwIGxlbj0iMTgiIHRhZz0iMDAwMjAwMTAiIHZyPSJV
SSI+MS4yLjg0MC4xMDAwOC4xLjI8L3RhZzAwMDIwMDEwPgogICAgPHRhZzAwMDIwMDEyIGxlbj0i
MjQiIHRhZz0iMDAwMjAwMTIiIHZyPSJVSSI+MS4zLjYuMS40LjEuMjU0MDMuMS4xLjE8L3RhZzAw
MDIwMDEyPgogICAgPHRhZzAwMDIwMDEzIGxlbj0iMTAiIHRhZz0iMDAwMjAwMTMiIHZyPSJTSCI+
RGljb20gMC4xPC90YWcwMDAyMDAxMz4KICAgIDx0YWcwMDA4MDAwNSBsZW49IjEwIiB0YWc9IjAw
MDgwMDA1IiB2cj0iQ1MiPklTT19JUiAxOTI8L3RhZzAwMDgwMDA1PgogICAgPHRhZzAwMDgwMDE2
IGxlbj0iMzAiIHRhZz0iMDAwODAwMTYiIHZyPSJVSSI+MS4yLjg0MC4xMDAwOC41LjEuNC4xLjEu
MTA0LjE8L3RhZzAwMDgwMDE2PgogICAgPHRhZzAwMDgwMDE4IGxlbj0iNTQiIHRhZz0iMDAwODAw
MTgiIHZyPSJVSSI+MS4zLjYuMS40LjEuMjU0MDMuOTI0Mjc1MjM1NTk0NDguOTIyMC4yMDE5MTAy
MjA0MjQ1Mi4xPC90YWcwMDA4MDAxOD4KICAgIDx0YWcwMDA4MDAyMCBsZW49IjAiIHRhZz0iMDAw
ODAwMjAiIHZyPSJEQSI+PC90YWcwMDA4MDAyMD4KICAgIDx0YWcwMDA4MDAyMSBsZW49IjAiIHRh
Zz0iMDAwODAwMjEiIHZyPSJEQSI+PC90YWcwMDA4MDAyMT4KICAgIDx0YWcwMDA4MDAyMiBsZW49
IjAiIHRhZz0iMDAwODAwMjIiIHZyPSJEQSI+PC90YWcwMDA4MDAyMj4KICAgIDx0YWcwMDA4MDAy
MyBsZW49IjAiIHRhZz0iMDAwODAwMjMiIHZyPSJEQSI+PC90YWcwMDA4MDAyMz4KICAgIDx0YWcw
MDA4MDAyQSBsZW49IjAiIHRhZz0iMDAwODAwMkEiIHZyPSJEVCI+PC90YWcwMDA4MDAyQT4KICAg
IDx0YWcwMDA4MDAzMCBsZW49IjAiIHRhZz0iMDAwODAwMzAiIHZyPSJUTSI+PC90YWcwMDA4MDAz
MD4KICAgIDx0YWcwMDA4MDAzMSBsZW49IjAiIHRhZz0iMDAwODAwMzEiIHZyPSJUTSI+PC90YWcw
MDA4MDAzMT4KICAgIDx0YWcwMDA4MDAzMyBsZW49IjAiIHRhZz0iMDAwODAwMzMiIHZyPSJUTSI+
PC90YWcwMDA4MDAzMz4KICAgIDx0YWcwMDA4MDA1MCBsZW49IjExIiB0YWc9IjAwMDgwMDUwIiB2
cj0iU0giPjwvdGFnMDAwODAwNTA+CiAgICA8dGFnMDAwODAwNjAgbGVuPSIyIiB0YWc9IjAwMDgw
MDYwIiB2cj0iQ1MiPk9UPC90YWcwMDA4MDA2MD4KICAgIDx0YWcwMDA4MDA2NCBsZW49IjIiIHRh
Zz0iMDAwODAwNjQiIHZyPSJDUyI+U0Q8L3RhZzAwMDgwMDY0PgogICAgPHRhZzAwMDgwMDcwIGxl
bj0iMjAiIHRhZz0iMDAwODAwNzAiIHZyPSJMTyI+U3BhY2VsYWJzIEhlYWx0aGNhcmU8L3RhZzAw
MDgwMDcwPgogICAgPHRhZzAwMDgwMDgwIGxlbj0iMCIgdGFnPSIwMDA4MDA4MCIgdnI9IkxPIi8+
CiAgICA8dGFnMDAwODAwOTAgbGVuPSIwIiB0YWc9IjAwMDgwMDkwIiB2cj0iUE4iLz4KICAgIDx0
YWcwMDA4MTAxMCBsZW49IjgiIHRhZz0iMDAwODEwMTAiIHZyPSJTSCI+U0VOVElORUw8L3RhZzAw
MDgxMDEwPgogICAgPHRhZzAwMDgxMDMwIGxlbj0iMCIgdGFnPSIwMDA4MTAzMCIgdnI9IkxPIi8+
CiAgICA8dGFnMDAwODEwM0UgbGVuPSIwIiB0YWc9IjAwMDgxMDNFIiB2cj0iTE8iLz4KICAgIDx0
YWcwMDA4MTA0MCBsZW49IjAiIHRhZz0iMDAwODEwNDAiIHZyPSJMTyIvPgogICAgPHRhZzAwMDgx
MDQ4IGxlbj0iMCIgdGFnPSIwMDA4MTA0OCIgdnI9IlBOIi8+CiAgICA8dGFnMDAwODEwNTAgbGVu
PSIwIiB0YWc9IjAwMDgxMDUwIiB2cj0iUE4iLz4KICAgIDx0YWcwMDA4MTA2MCBsZW49IjAiIHRh
Zz0iMDAwODEwNjAiIHZyPSJQTiIvPgogICAgPHRhZzAwMTAwMDEwIGxlbj0iMCIgdGFnPSIwMDEw
MDAxMCIgdnI9IlBOIj48L3RhZzAwMTAwMDEwPgogICAgPHRhZzAwMTAwMDIwIGxlbj0iMCIgdGFn
PSIwMDEwMDAyMCIgdnI9IkxPIj48L3RhZzAwMTAwMDIwPgogICAgPHRhZzAwMTAwMDMwIGxlbj0i
MCIgdGFnPSIwMDEwMDAzMCIgdnI9IkRBIj48L3RhZzAwMTAwMDMwPgogICAgPHRhZzAwMTAwMDQw
IGxlbj0iMiIgdGFnPSIwMDEwMDA0MCIgdnI9IkNTIj5NPC90YWcwMDEwMDA0MD4KICAgIDx0YWcw
MDEwMTAwMCBsZW49IjAiIHRhZz0iMDAxMDEwMDAiIHZyPSJMTyIvPgogICAgPHRhZzAwMTAxMDIw
IGxlbj0iMCIgdGFnPSIwMDEwMTAyMCIgdnI9IkRTIi8+CiAgICA8dGFnMDAxMDEwMzAgbGVuPSIw
IiB0YWc9IjAwMTAxMDMwIiB2cj0iRFMiLz4KICAgIDx0YWcwMDEwMjE2MCBsZW49IjAiIHRhZz0i
MDAxMDIxNjAiIHZyPSJTSCIvPgogICAgPHRhZzAwMTA0MDAwIGxlbj0iMCIgdGFnPSIwMDEwNDAw
MCIgdnI9IkxUIi8+CiAgICA8dGFnMDAyMDAwMEQgbGVuPSIwIiB0YWc9IjAwMjAwMDBEIiB2cj0i
VUkiPjwvdGFnMDAyMDAwMEQ+CiAgICA8dGFnMDAyMDAwMEUgbGVuPSIwIiB0YWc9IjAwMjAwMDBF
IiB2cj0iVUkiPjwvdGFnMDAyMDAwMEU+CiAgICA8dGFnMDAyMDAwMTAgbGVuPSIwIiB0YWc9IjAw
MjAwMDEwIiB2cj0iU0giLz4KICAgIDx0YWcwMDIwMDAxMSBsZW49IjIiIHRhZz0iMDAyMDAwMTEi
IHZyPSJJUyI+MTwvdGFnMDAyMDAwMTE+CiAgICA8dGFnMDAyMDAwMTMgbGVuPSIyIiB0YWc9IjAw
MjAwMDEzIiB2cj0iSVMiPjE8L3RhZzAwMjAwMDEzPgogICAgPHRhZzAwMjAxMjA5IGxlbj0iMiIg
dGFnPSIwMDIwMTIwOSIgdnI9IklTIj4xPC90YWcwMDIwMTIwOT4KICAgIDx0YWcwMDI4MDMwMSBs
ZW49IjQiIHRhZz0iMDAyODAzMDEiIHZyPSJDUyI+WUVTPC90YWcwMDI4MDMwMT4KICAgIDx0YWcw
MDM4MDAxMCBsZW49IjAiIHRhZz0iMDAzODAwMTAiIHZyPSJMTyIvPgogICAgPHRhZzAwNDIwMDEw
IGxlbj0iMyIgdGFnPSIwMDQyMDAxMCIgdnI9IlNUIj5DUjwvdGFnMDA0MjAwMTA+CiAgICA8dGFn
MDA0MjAwMTEgbGVuPSIwIiB0YWc9IjAwNDIwMDExIiB2cj0iT0IiPjwvdGFnMDA0MjAwMTE+CiAg
ICA8dGFnMDA0MjAwMTIgbGVuPSIxNiIgdGFnPSIwMDQyMDAxMiIgdnI9IkxPIj5hcHBsaWNhdGlv
bi9wZGY8L3RhZzAwNDIwMDEyPgo8L2RpY29tPgo=</outboundTemplate>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>DICOM</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.dicom.DICOMDataTypeProperties" version="3.8.0"/>
          </transformer>
          <responseTransformer version="3.8.0">
            <elements/>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.8.0">
            <elements/>
          </filter>
          <transportName>File Writer</transportName>
          <mode>DESTINATION</mode>
          <enabled>false</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
        <connector version="3.8.0">
          <metaDataId>9</metaDataId>
          <name>DICOM Header para pdf2dcm</name>
          <properties class="com.mirth.connect.connectors.file.FileDispatcherProperties" version="3.8.0">
            <pluginProperties/>
            <destinationConnectorProperties version="3.8.0">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <scheme>FILE</scheme>
            <host>C:/Temp/DICOM/config</host>
            <outputPattern>${UUID}.cfg</outputPattern>
            <anonymous>true</anonymous>
            <username>anonymous</username>
            <password>anonymous</password>
            <timeout>10000</timeout>
            <keepConnectionOpen>true</keepConnectionOpen>
            <maxIdleTime>0</maxIdleTime>
            <secure>true</secure>
            <passive>true</passive>
            <validateConnection>true</validateConnection>
            <outputAppend>true</outputAppend>
            <errorOnExists>false</errorOnExists>
            <temporary>false</temporary>
            <binary>false</binary>
            <charsetEncoding>DEFAULT_ENCODING</charsetEncoding>
            <template># pdf2dcm Default Configuration

# Patient Module Attributes
# Patient&apos;s Name
00100010:${PatientFamilyName}^${PatientGivenName}
# Patient ID
00100020:${PatientID}
# Issuer of Patient ID
#00100021: 
# Patient&apos;s Birth Date
00100030:${PatientBirthDate}
# Patient&apos;s Sex
00100040:${PatientSex}

# General Study Module Attributes
# Study Instance UID
#0020000D:${StudyUID}
# Study Date
00080020:${StudyDate}
# Study Time
00080030:${StudyTime}
# Referring Physician&apos;s Name
00080090:${ReferringPhysicianFamilyName}^${ReferringPhysicianGivenName}
# Study ID
00200010:${StudyID}
# Accession Number
00080050:${AccessionNumber}
# Study Description
#00081030:

# Encapsulated Document Series Attributes
# Modality
00080060:OT
# Series Instance UID
#0020,000E:
# Series Number
00200011:1

# General Equipment Module Attributes
# Manufacturer
00080070:SpaceMedical

# SC Equipment Module Attributes
# Conversion Type
00080064:SD

# Encapsulated Document Module Attributes
# Instance Number
00200013:1
# Content Date
00080023:${StudyDate}
# Content Time
00080033:${StudyTime}
# Acquisition Datetime
0008002A:${StudyDate}${StudyTime}
# Burned In Annotation
00280301:YES
# Document Title
00420010:CR
# Concept Name Code Value
#0040A043/00080100:
# Concept Name Coding Scheme Designator
#0040A043/00080102:
# Concept Name Meaning
#0040A043/00080104:
# MIME Type of Encapsulated Document
00420012:application/pdf

# SOP Common Module Attributes
# SOP Class UID
00080016:1.2.840.10008.5.1.4.1.1.104.1
# SOP Instance UID
#00080018
</template>
          </properties>
          <transformer version="3.8.0">
            <elements>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.8.0">
                <name>Váriáveis</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <script>var StudyUID = (org.dcm4che2.util.UIDUtils.createUID());
channelMap.put(&apos;StudyUID&apos;,StudyUID)

var SeriesUID = (org.dcm4che2.util.UIDUtils.createUID());
channelMap.put(&apos;SeriesUID&apos;,SeriesUID)

var SOPInstanceUID = (org.dcm4che2.util.UIDUtils.createUID());
channelMap.put(&apos;SOPInstanceUID&apos;,SOPInstanceUID)</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64"></inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.8.0">
            <elements/>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.8.0">
            <elements/>
          </filter>
          <transportName>File Writer</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
        <connector version="3.8.0">
          <metaDataId>10</metaDataId>
          <name>PDF encapsulado</name>
          <properties class="com.mirth.connect.connectors.js.JavaScriptDispatcherProperties" version="3.8.0">
            <pluginProperties/>
            <destinationConnectorProperties version="3.8.0">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <script>var channelName = Packages.com.mirth.connect.server.controllers.ChannelController.getInstance().getDeployedChannelById(channelId).getName();
channelMap.put(&apos;Teste&apos;, channelName);

var fileNameString = $(&apos;nomeFicheiro&apos;);
var resultLocation =&quot;C:\\Temp\\DICOM\\config\\&quot;;
var tmpLocation = &quot;C:\\Temp\\DICOM\\Temp\\&quot;;

//conversão do PDF
var pdf2dcm = &quot;C:\\Temp\\DICOM\\tools\\dcm4che\\bin\\&quot;
var DICOMHeader = &quot;C:\\Temp\\DICOM\\config\\&quot; + $(&apos;nomeFicheiro&apos;) + &apos;cfg&apos;;
var jpgImage = &quot;&quot;
</script>
          </properties>
          <transformer version="3.8.0">
            <elements/>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.8.0">
            <elements/>
            <inboundDataType>HL7V2</inboundDataType>
            <outboundDataType>HL7V2</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.8.0">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.8.0">
                <handleRepetitions>true</handleRepetitions>
                <handleSubcomponents>true</handleSubcomponents>
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <stripNamespaces>true</stripNamespaces>
                <segmentDelimiter>\r</segmentDelimiter>
                <convertLineBreaks>true</convertLineBreaks>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.8.0">
                <useStrictParser>false</useStrictParser>
                <useStrictValidation>false</useStrictValidation>
                <segmentDelimiter>\r</segmentDelimiter>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.8.0">
                <splitType>MSH_Segment</splitType>
                <batchScript></batchScript>
              </batchProperties>
              <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.8.0">
                <segmentDelimiter>\r</segmentDelimiter>
                <successfulACKCode>AA</successfulACKCode>
                <successfulACKMessage></successfulACKMessage>
                <errorACKCode>AE</errorACKCode>
                <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
                <rejectedACKCode>AR</rejectedACKCode>
                <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
                <msh15ACKAccept>false</msh15ACKAccept>
                <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
              </responseGenerationProperties>
              <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.8.0">
                <successfulACKCode>AA,CA</successfulACKCode>
                <errorACKCode>AE,CE</errorACKCode>
                <rejectedACKCode>AR,CR</rejectedACKCode>
                <validateMessageControlId>true</validateMessageControlId>
                <originalMessageControlId>Destination_Encoded</originalMessageControlId>
                <originalIdMapVariable></originalIdMapVariable>
              </responseValidationProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.8.0">
            <elements/>
          </filter>
          <transportName>JavaScript Writer</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
message = message.replace(/ã/g, &quot;\\XE3\\&quot;);
message = message.replace(/Ã/g, &quot;\\XC3\\&quot;);
message = message.replace(/ç/g, &quot;\\XE7\\&quot;);
message = message.replace(/Ç/g, &quot;\\XC7\\&quot;);
message = message.replace(/é/g, &quot;\\XE9\\&quot;);
message = message.replace(/É/g, &quot;\\XC9\\&quot;);
message = message.replace(/á/g, &quot;\\XE1\\&quot;);
message = message.replace(/Á/g, &quot;\\XC1\\&quot;);
message = message.replace(/õ/g, &quot;\\XF5\\&quot;);
message = message.replace(/Õ/g, &quot;\\XD5\\&quot;);
message = message.replace(/Ó/g, &quot;\\XD3\\&quot;);
message = message.replace(/ó/g, &quot;\\XF3\\&quot;);
message = message.replace(/º/g, &quot;\\XBA\\&quot;);
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.8.0">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.8.0">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1571847311929</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
  </channels>
</channelGroup>